---
id: 6733bee844600f35c05b8264
title: How Does try...catch...finally Work?
challengeType: 19
dashedName: how-does-try-catch-finally-work
---

# --interactive--

在上一课里你学会了如何抛出异常，这一课我们来看看如何在 `try…catch…finally` 块中优雅地处理这些错误。

`try` 块用于包裹可能会抛出错误的代码，提供一个“尝试”的安全区域。

`catch` 块会捕获并处理在 `try` 内发生的错误。你可以在 `catch` 中使用传入的 `Error` 对象来检查出了什么问题。

`finally` 块无论是否发生错误都会执行，通常用于清理工作，比如关闭文件或释放资源。

下面是使用 `try…catch` 的示例：

:::interactive_editor

```js
function processInput(input) {
  if (typeof input !== "string") {
    throw new TypeError("Input must be a string.");
  }

  return input.toUpperCase();
}

try {
  console.log("Starting to process input...");
  const result = processInput(9);
  console.log("Processed result:", result);
} catch (error) {
  console.error("Error occurred:", error.message);
} 
```

:::

在此示例中，`processInput` 会先检查 `input` 是否为字符串；若不是，则抛出错误，否则返回 `toUpperCase()` 的结果。

当我们在 `try` 中调用该函数并触发错误时，错误会被 `catch` 捕获并通过 `console.error` 输出。

传入 `catch` 的错误对象是 `Error` 类型，它包含了错误的详细信息；常用的 `message` 属性能向用户展示可读的信息。

`console.error` 专用于记录错误，在许多现代浏览器中，这类输出会以红色显示，便于区分。

`finally` 无论是否发生异常都会执行，其常见用途包括文件处理的清理步骤。例如在打开文件后，无论写入是否成功，都可以在 `finally` 中关闭文件句柄。

```js
try {
  // 可能抛出错误的代码
} catch (error) {
  // 处理错误的代码
} finally {
  // 无论如何都会执行的清理代码
}
```

请在练习中尝试将这些模式运用到你的代码里，它们会让程序更稳健并帮助你从容应对异常情况。

# --questions--


## --text--

下面哪项最能描述 `try` 块？

## --answers--

用于在可能出错的代码周围提供一个安全的执行区域。

### --feedback--

想想 `try…catch…finally` 的执行顺序以及各自的职责。

---

用于处理错误。

### --feedback--

想想 `try…catch…finally` 的执行顺序以及各自的职责。

---

用于在抛出错误之前进行准备工作。

### --feedback--

想想 `try…catch…finally` 的执行顺序以及各自的职责。

---

它是用于可能抛出错误的代码的安全包装。

## --video-solution--

4

## --text--

哪一个块即使发生错误也会始终执行？

## --answers--

`try`

### --feedback--

该块通常用于准备或执行可能会抛出错误的代码。

---

`catch`

### --feedback--

该块通常用于准备或执行可能会抛出错误的代码。

---

`finally`

---

`throw`

### --feedback--

该块通常用于准备或执行可能会抛出错误的代码。

## --video-solution--

3

## --text--

`catch` 块的用途是什么？

## --answers--

执行可能会抛出错误的代码。

### --feedback--

当 `try` 中出现问题时，这个块会被触发来处理错误。

---

定义一个安全的执行空间。

### --feedback--

当 `try` 中出现问题时，这个块会被触发来处理错误。

---

优雅地处理错误以避免程序崩溃。

---

始终执行，无论是否有错误。

### --feedback--

当 `try` 中出现问题时，这个块会被触发来处理错误。

## --video-solution--

3
