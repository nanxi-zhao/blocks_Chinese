---
id: 6882904fd7063f7258c0aef3
title: How Do You Handle Security Requirements Like SSH and GPG Keys?
challengeType: 19
dashedName: how-do-you-handle-security-requirements-like-ssh-and-gpg-keys
---

# --description--

在把本地仓库推送（push）到 GitHub 之前，你需要先进行身份验证。SSH 和 GPG 密钥都使用一对公钥/私钥的机制：私钥保存在本地用于进行身份认证，公钥则共享给需要验证你身份的服务或用户。换句话说，私钥用于执行需要权限的操作，公钥用于验证该操作确实来自你的私钥。

GPG（Gnu Privacy Guard）密钥通常用于对文件或提交进行签名，他人可以使用你的公钥来验证签名是否来自你，并确认文件内容未被篡改。SSH（Secure SHell）密钥通常用于通过 `ssh` 工具对远程服务器进行身份验证。不过如本节所示，SSH 密钥也可以用来签名提交（commit）。

生成 GPG 密钥的命令示例：

```sh
gpg --full-generate-key
```

生成 SSH 密钥的命令示例：

```sh
ssh-keygen -t ed25519 -C "your_email@example.com"
```

请把示例邮箱替换为你自己的真实邮箱。

上述两类命令通常会要求设置一个用于保护私钥的口令（passphrase），虽然可选但强烈建议设置。

SSH 密钥会生成两个文件：私钥和公钥。公钥文件名通常以 `.pub` 结尾，这能帮助你避免意外分享私钥。SSH 密钥默认存放在 `~/.ssh` 目录下。

GPG 密钥则存储在一个加密的隐藏目录中。要列出你的私钥并获取其长 ID，可以运行：

```sh
gpg --list-secret-keys --keyid-format=long
```

然后使用下面的命令以 ASCII 格式导出公钥：

```sh
gpg --armor --export "<key id>"
```

这些密钥可以用于对提交进行签名，增加提交的可信度。

要使用 GPG 密钥签名提交，需先把公钥（不要上传私钥）添加到你的 GitHub 帐户。然后使用 `gpg --list-secret-keys` 获取的短 ID，配置为 Git 的签名密钥：

```sh
git config --global user.signingkey <your_gpg_key_id>
```

之后可以在 `git commit` 时使用 `-S` 标志为单次提交签名，届时需输入你的私钥口令；若希望自动为所有提交签名，可将自动签名配置打开：

```sh
git config --global commit.gpgsign true
```

要使用 SSH 密钥进行签名（这是 GitHub 的较新特性），先把 SSH 公钥上传到 GitHub，然后将 Git 的签名格式设置为 SSH：

```sh
git config --global gpg.format ssh
```

接着设置签名密钥时使用文件路径而非密钥 ID：

```sh
git config --global user.signingkey <path_to_your_ssh_keys>
```

最后同样可以启用自动签名设置。

使用以上任一方法配置后，你的已签名提交在 GitHub 上会显示为经过验证并带有特殊标识。

# --questions--

## --text--

私钥与公钥在 SSH/GPG 密钥对中的根本区别是什么？

## --answers--

私钥比公钥更长。

### --feedback--

想一想谁能访问每个密钥以及它们存放的位置。

---

私钥保存在你的本地机器，而公钥用于共享。

---

公钥用于加密数据，而私钥用于解密。

### --feedback--

想一想谁能访问每个密钥以及它们存放的位置。

---

私钥会在某个时间点过期。

### --feedback--

想一想谁能访问每个密钥以及它们存放的位置。

## --video-solution--

2

## --text--

下面哪个命令可用于启用使用 GPG 密钥对所有提交自动签名？

## --answers--

```sh
git config --global gpg.autosign true
```

### --feedback--

请参阅课中关于自动签名的配置示例。

---

```sh
git config --global commit.sign always
```

### --feedback--

请参阅课中关于自动签名的配置示例。

---

```sh
git config --global commit.gpgsign true
```

---

```sh
git --enable-auto-signing
```

### --feedback--

请参阅课中关于自动签名的配置示例。

## --video-solution--

3

## --text--

在 GitHub 上配置使用 SSH 密钥为 Git 提交签名需要哪些步骤？

## --answers--

只需把你的公钥上传到 GitHub 即可。

### --feedback--

想想课中提到的 SSH 签名配置步骤。

---

将签名格式设置为 SSH，并配置签名密钥的路径。

---

为签名生成一把与常规 SSH 密钥不同的专用 SSH 签名密钥。

### --feedback--

想想课中提到的 SSH 签名配置步骤。

---

在帐户设置中启用某个特殊的 GitHub 功能。

### --feedback--

想想课中提到的 SSH 签名配置步骤。

## --video-solution--

2
