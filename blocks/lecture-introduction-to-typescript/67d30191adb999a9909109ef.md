---
id: 67d30191adb999a9909109ef
title: What Are Generics, and How Do They Work?
challengeType: 19
dashedName: what-are-generics-and-how-do-they-work
---

# --description--

你在之前的讲解中其实已经见过泛型类型：`Array<string>`。不过泛型通常在函数中更常见。可以把泛型想象成传给函数的“类型参数”，用于控制函数的类型行为。

回到之前从数组中获取随机值的例子：

```js
const getRandomValue = (array: string[]): string => {
  return array[Math.floor(Math.random() * array.length)];
}
```

上面的函数接受字符串数组并返回字符串。但如果我们想传入数字数组并返回数字，该怎么办？

可以使用联合类型：

```js
const getRandomValue = (array: (string|number)[]): (string|number) => {
  return array[Math.floor(Math.random() * array.length)];
}
const val = getRandomValue([1, 2, 4])
```

但这样一来，即便我们传入的是纯数字数组，TypeScript 也会把 `val` 推断为“可能是数字也可能是字符串”的类型。

更好的做法是为函数定义泛型类型：

```js
const getRandomValue = <T>(array: T[]): T => {
  return array[Math.floor(Math.random() * array.length)];
}
const val = getRandomValue([1, 2, 4])
```

在这个例子中有几个关键点：首先，`<T>` 告诉 TypeScript 你正在为函数定义一个泛型类型 `T`。`T` 是泛型中常用的占位名称，但你也可以使用其他合法标识符。

接着我们告诉 TypeScript：参数 `array` 是一个元素类型为 `T` 的数组，函数返回类型也是 `T`。这使得 TypeScript 能正确推断出 `val` 为数字，因为传入的数组元素都是数字。

那如果是你无法控制的函数怎么办？看 `document.querySelector()`：

```js
const email = document.querySelector("#email");
console.log(email.value);
```

因为用的是 ID 选择器，TypeScript 无法知道我们会选中哪种元素——它只知道会返回一个 `Element`，而顶层的 `Element` 接口没有 `value` 属性，所以访问 `value` 会报错。

幸运的是，我们可以在调用时传入类型参数：

```js
const email = document.querySelector<HTMLInputElement>("#email");
console.log(email.value);
```

注意这里再次使用了尖括号语法（`<HTMLInputElement>`），但这次出现在函数调用处，告诉 TypeScript 我们期望获取到的是一个 `input` 元素，因此访问 `value` 不再报错。当然，`querySelector` 也可能返回 `null`（找不到元素），TypeScript 会在你未处理 `null` 的情况下提示编译错误——这部分内容会在下一课中讲解。

# --questions--

## --text--

What is the correct syntax for defining a generic type in a function?

## --answers--

```ts
function<T>
```

---

```ts
<T>function
```

### --feedback--

The generic type is defined using angle brackets before the function's parameter list.

---

```ts
(T)function
```

### --feedback--

The generic type is defined using angle brackets before the function's parameter list.

---

```ts
function(T)
```

### --feedback--

The generic type is defined using angle brackets before the function's parameter list.

## --video-solution--

1

## --text--

What does `T[]` represent in the following example?

```ts
const getRandomValue = <T>(array: T[]): T => { ... }
```

## --answers--

An array of any type.

### --feedback--

The square brackets after `T` indicate an array of that type.

---

An array of the generic type `T`.

---

A tuple of type `T`.

### --feedback--

The square brackets after `T` indicate an array of that type.

---

A single element of type `T`.

### --feedback--

The square brackets after `T` indicate an array of that type.

## --video-solution--

2

## --text--

How can you specify a type argument when calling `document.querySelector()`?

## --answers--

```js
document.querySelector("#email", HTMLInputElement)
```

### --feedback--

The type argument is passed using angle brackets between the function name and its parameters.

---

```js
document.querySelector("#email"): HTMLInputElement
```

### --feedback--

The type argument is passed using angle brackets between the function name and its parameters.

---

```js
document.querySelector<HTMLInputElement>("#email")
```

---

```js
document.querySelector("#email" as HTMLInputElement)
```

### --feedback--

The type argument is passed using angle brackets between the function name and its parameters.

## --video-solution--

3
