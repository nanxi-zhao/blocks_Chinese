---
id: 672a54ce90c19e9038f481d7
title: 什么是 aria-expanded 属性，它是如何工作的？
challengeType: 19
dashedName: what-is-the-aria-expanded-attribute
---

# --interactive--

`aria-expanded` 属性用于无障碍目的，以指示控件是展开还是折叠。它与可折叠的小部件（如菜单、手风琴和其他控制内容可见性的披露小部件）一起使用。如果控件展开，`aria-expanded` 属性设置为 `true`，如果折叠则设置为 `false`。

`aria-expanded` 提供的信息允许使用屏幕阅读器的人了解控件的当前状态（是展开还是折叠）。

`aria-expanded` 属性应用于切换可折叠小部件可见性的交互元素。例如，如果一个按钮切换可展开菜单，`aria-expanded` 属性放在按钮上。

当菜单展开时，`aria-expanded` 属性应设置为 `true`，如下例所示：

```html
<button aria-expanded="true">菜单</button>
```

当菜单折叠时，它应设置为 `false`。

```html
<button aria-expanded="false">菜单</button>
```

你必须始终在控制元素上将 `aria-expanded` 属性设置为 `true` 或 `false`。例如，如果一个按钮切换菜单的可见性，`aria-expanded` 的默认值应基于菜单的默认可见性。

如果菜单默认展开，`aria-expanded` 应初始设置为 `true`。如果菜单默认折叠，`aria-expanded` 应初始设置为 `false`。

`aria-expanded` 的值应使用 JavaScript 在用户与元素交互时动态更新。

此外，属性 `aria-controls` 和 `aria-owns` 可以与 `aria-expanded` 结合使用，以在控制元素和它控制的元素之间建立程序化连接。

让我们从 `aria-controls` 开始。当与 `aria-expanded` 一起使用时，`aria-controls` 属性用于指定被控制的元素。例如，一个按钮可能展开或折叠作为菜单的列表。`aria-controls` 的值将是被控制元素的 `id`（在此示例中是菜单列表）。

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">

<button aria-expanded="false" aria-controls="menu1">菜单</button>
<ul id="menu1">
  <li>...</li>
  <li>...</li>
</ul>

<script src="index.js"></script>
```

```css
button {
  background-color: #0078d4;
  color: white;
  padding: 8px 12px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background-color: #005ea2;
}

ul {
  list-style: none;
  padding: 0;
  margin: 8px 0 0;
  border: 1px solid #ccc;
  border-radius: 4px;
  width: 150px;
  background: #fff;
}

li {
  padding: 8px;
  cursor: pointer;
}

li:hover {
  background-color: #f2f2f2;
}

```

```js
const button = document.querySelector('button');
const menu = document.getElementById(button.getAttribute('aria-controls'));

button.addEventListener('click', () => {
  const expanded = button.getAttribute('aria-expanded') === 'true';
  button.setAttribute('aria-expanded', String(!expanded));
  menu.hidden = expanded;
});

```

:::

注意列表紧跟在控制按钮之后。对于这样的可展开控件，最好将展开的内容紧跟在控制它的元素之后的 DOM 中。这可以防止屏幕阅读器用户搜索展开的内容，并使键盘用户更容易浏览展开内容中的任何交互控件。

如果无法将展开的内容紧跟在控制元素之后，`aria-owns` 属性允许你在无障碍树中将它虚拟地移动到控件之后。这允许像屏幕阅读器这样的辅助技术假装展开的内容在 DOM 中紧跟在控件之后。

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">

<button aria-owns="menu1" aria-expanded="true">菜单</button>
<main>
  <!-- 整页内容 --->
</main>
<ul id="menu1">
  <li>...</li>
  <li>...</li>
</ul>

<script src="index.js"></script>
```

```css
button {
  background-color: #0078d4;
  color: white;
  padding: 8px 12px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-bottom: 10px;
}

button:hover {
  background-color: #005ea2;
}

ul {
  list-style: none;
  padding: 0;
  margin: 8px 0;
  border: 1px solid #ccc;
  border-radius: 4px;
  width: 150px;
  background: #fff;
  position: absolute;
  z-index: 10;
}

li {
  padding: 8px;
  cursor: pointer;
}

li:hover {
  background-color: #f2f2f2;
}

```

```js
const button = document.querySelector('button');
const menu = document.getElementById(button.getAttribute('aria-owns'));

button.addEventListener('click', () => {
  const expanded = button.getAttribute('aria-expanded') === 'true';
  button.setAttribute('aria-expanded', String(!expanded));
  menu.hidden = expanded;
});

// 如果用户点击外部则关闭菜单
document.addEventListener('click', (e) => {
  if (!button.contains(e.target) && !menu.contains(e.target)) {
    button.setAttribute('aria-expanded', 'false');
    menu.hidden = true;
  }
});

```

:::

使用 `aria-owns` 属性有缺点。它为屏幕阅读器用户创造了不必要的冗长，因为大多数屏幕阅读器会在首次展开时自动读出展开元素的全部内容。它也不会改变制表符顺序，可能迫使键盘用户在到达展开内容之前通过页面上所有其他交互控件进行制表，除非你使用 JavaScript 管理制表顺序。

理想情况下，可展开内容应放在控件元素之后，只有在不可能的情况下才使用 `aria-owns` 属性作为最坏情况。如果必须使用，你需要在各种屏幕阅读器和浏览器上进行彻底测试，以确保你的实现对每个人都是可访问的。

提醒一下，当你使用 `aria-controls` 或 `aria-owns` 时，`aria-expanded` 的值必须在控件展开和折叠时继续更新。

`aria-expanded` 属性指示控件是展开还是折叠。这些信息对屏幕阅读器用户至关重要，帮助他们了解可折叠元素（如菜单、手风琴和其他类似披露小部件）的当前状态。

通过正确使用 `aria-expanded`，你可以为每个人创造直观的用户体验。

# --questions--

## --text--

`aria-expanded` 属性的主要目的是什么？

## --answers--

定义元素的视觉外观。

### --feedback--

想想 `aria-expanded` 如何向辅助技术提供信息。

---

提高网站性能。

### --feedback--

想想 `aria-expanded` 如何向辅助技术提供信息。

---

指示元素是展开还是折叠。

---

增强浏览器兼容性。

### --feedback--

想想 `aria-expanded` 如何向辅助技术提供信息。

## --video-solution--

3

## --text--

什么时候应该使用 `aria-expanded` 属性？

## --answers--

用于网页上的所有元素。

### --feedback--

考虑 `aria-expanded` 在什么情况下最有用。

---

用于视觉隐藏的元素。

### --feedback--

考虑 `aria-expanded` 在什么情况下最有用。

---

用于可折叠元素如菜单和手风琴。

---

用于具有动态内容的元素。

### --feedback--

考虑 `aria-expanded` 在什么情况下最有用。

## --video-solution--

3

## --text--

`aria-expanded` 属性的可能值是什么？

## --answers--

`true`, `false`, `yes`, `no`。

### --feedback--

想想元素在展开或折叠方面可以处于什么状态。

---

`open`, `closed`, `expanded`, `collapsed`。

### --feedback--

想想元素在展开或折叠方面可以处于什么状态。

---

`show`, `hide`, `visible`, `invisible`。

### --feedback--

想想元素在展开或折叠方面可以处于什么状态。

---

`true`, `false`。

## --video-solution--

4