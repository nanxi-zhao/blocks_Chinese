---
id: 673407ca21117a67cf9521ca
title: What Are Promises, and How Does Promise Chaining Work?
challengeType: 19
dashedName: what-are-promises-and-how-does-promise-chaining-work
---

# --description--

`Promise`是一个对象，代表异步操作的最终完成或失败。它最初处于待处理状态。然后它可以转换为完成状态(当操作成功时)或拒绝状态(当操作失败时)。下面是创建`Promise`的示例：

```js
const aPromise = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve("Operation successful!");
  }, 1000);
});
```

在这个例子中，我们创建了一个使用`setTimeout`模拟异步操作的承诺。一秒钟后，承诺以消息`Operation successful!`解决。

处理承诺的另一种方法是使用`.then`和`.catch`方法。

`.then()`方法在承诺中用于指定承诺完成时应该发生什么，而`.catch()`用于处理发生的任何错误。让我们看看如何在承诺中使用`.then`和`.catch`：

```js
aPromise.then((result) => {
  console.log(result);  // 输出: "Operation successful!"
}).catch((error) => {
  console.error(error);
});
```

在这段代码中，或者在承诺完成时要做什么的指令中，传递给`.then()`的函数将使用承诺的解决值被调用。如果发生错误，将调用传递给`.catch()`的函数。

现在，让我们谈谈承诺链。承诺的强大特性之一是我们可以将多个异步操作链接在一起。每个`.then()`可以返回一个新的承诺，允许你一个接一个地执行一系列异步操作。下面是一个示例：

```js
fetch('https://api.example.com/data')
  .then(response => response.json())
  .then(data => {
    console.log(data);
    return fetch('https://api.example.com/data2');
  })
  .then(response => response.json())
  .then(data2 => console.log(data2))
  .catch(error => console.error('Error:', error));
```

在这个例子中，我们按顺序进行两次API调用。第一个`.then()`将响应解析为JSON。第二个`.then()`记录数据并进行另一次API调用。第三个`.then()`解析第二次API调用的响应，第四个`.then()`记录该数据。如果在链中的任何点发生错误，它将被末尾的`.catch()`捕获。

需要注意的是，`.catch()`将捕获链中任何先前步骤的错误。这意味着你不需要为每个单独的步骤添加错误处理，这可以大大简化你的代码。

# --questions--

## --text--

承诺可能有哪些状态？

## --answers--

活跃、非活跃或终止。

### --feedback--

想想承诺从创建到完成经历的阶段。

---

运行、暂停或停止。

### --feedback--

想想承诺从创建到完成经历的阶段。

---

待处理、完成或拒绝。

---

开始、处理或结束。

### --feedback--

想想承诺从创建到完成经历的阶段。

## --video-solution--

3

## --text--

在承诺链中`.then()`方法的目的是什么？

## --answers--

创建一个新的承诺。

### --feedback--

考虑`.then()`允许你对承诺的结果做什么。

---

指定承诺完成时发生什么。

---

处理承诺链中的错误。

### --feedback--

考虑`.then()`允许你对承诺的结果做什么。

---

取消一个承诺。

### --feedback--

考虑`.then()`允许你对承诺的结果做什么。

## --video-solution--

2

## --text--

在承诺链中，你通常应该将`.catch()`方法放在哪里？

## --answers--

在每个`.then()`之后。

### --feedback--

想想`.catch()`如何处理链中多个步骤的错误。

---

在第一个`.then()`之前。

### --feedback--

想想`.catch()`如何处理链中多个步骤的错误。

---

在链的中间。

### --feedback--

想想`.catch()`如何处理链中多个步骤的错误。

---

在链的末尾。

## --video-solution--

4
