---
id: 67d1a82dad69dc95546e5f0d
title: 如何使用Refs引用值？
challengeType: 19
dashedName: how-do-you-reference-values-using-refs
---

# --description--

在React中，可能会遇到需要直接访问DOM元素的情况。这就是"refs"派上用场的地方。Refs还可以存储可变值，但对于这一点，状态是更好的选择。

在原生JavaScript中，你使用`getElementById()`和`querySelector()`方法来访问DOM元素。但在React中，你使用refs来访问DOM中的元素。

主要区别之一是，使用refs时，你不需要像ID和类这样的标识符来引用元素。

那么，如何创建和使用refs呢？React提供了一个`useRef()`钩子，让你可以做到这一点。

第一步是从React导入钩子：

```js
import { useRef } from "react";
```

接下来，你需要创建一个变量来保存ref，初始值在`useRef`钩子内部，比如一个初始化为`null`的`sectionRef`：

```js
const sectionRef = useRef(null);
```

最后要做的是通过使用`ref`属性将ref变量附加到JSX中的元素：

```jsx
<section ref={sectionRef}>
  {/* Section content */}
</section>
```

如果你将ref记录到控制台，你会看到它是一个具有当前值的对象，在这种情况下是`null`：

```js
console.log(sectionRef); // { current: null }
```

你也可以使用`current`属性将当前值记录到控制台，这样你可以直接看到值：

```js
console.log(sectionRef.current); // null
```

ref的后续值取决于组件生命周期。

例如，`sectionRef`的初始值将始终是`null`，因为这就是它被初始化的值。组件挂载后，ref的值将是ref附加到的`section`元素。

如果组件被卸载，ref的值会回到初始值`null`。

展示ref的典型示例是在渲染时或通过点击按钮来聚焦输入元素。

以下是点击按钮时如何做到这一点：

```jsx
import { useRef } from "react";

const Focus = () => {
  const inputRef = useRef(null);

  const handleFocus = () => {
    if (inputRef.current) {
      inputRef.current.focus();
    }
  };

  return (
    <div>
      <input ref={inputRef} type="text" placeholder="输入文本" />
      <button onClick={handleFocus}>聚焦输入框</button>
    </div>
  );
};

export default Focus;
```

在上面的代码中，`inputRef`被创建并附加到`input`元素。还有一个带有`onClick`事件的按钮，调用`handleFocus`函数。

`handleFocus`函数所做的就是调用`input`元素的`focus()`方法。注意，因为`input`是React自带的内置组件，实际的`input` DOM元素被设置为ref的`current`属性。所以你使用`input.current.focus()`调用`focus()`方法。

以下是一些在使用refs时应该了解的最佳实践：

- 主要使用refs与DOM交互。你也可以将它们用于可变数据，但对于这一点，状态是更好的选择。

- 不要使用refs进行基本的状态管理——这就是`useState`的用途。

- 在访问其属性之前，确保检查`ref.current`是否存在。以下是再次如何做到这一点：

```js
const handleFocus = () => {
  if (inputRef.current) {
    inputRef.current.focus();
  }
};
```

这可以防止在ref附加到DOM之前或移除后访问时出现错误。

# --questions--

## --text--

如何在React中创建和使用refs？

## --answers--

通过导入和使用`useState`钩子。

### --feedback--

寻找提供管理React组件中可变引用方式的钩子。

---

通过导入和使用`useEffect`钩子。

### --feedback--

寻找提供管理React组件中可变引用方式的钩子。

---

通过导入和使用`useRef`钩子。

---

通过导入和使用`useMemo`钩子。

### --feedback--

寻找提供管理React组件中可变引用方式的钩子。

## --video-solution--

3

## --text--

如果你将ref记录到控制台，它看起来像什么？

## --answers--

具有`current`属性的对象。

---

像字符串或数字这样的原始值。

### --feedback--

想想refs如何存储一个可变对象，该对象具有访问`current`值的键。

---

跟踪组件状态的函数。

### --feedback--

想想refs如何存储一个可变对象，该对象具有访问`current`值的键。

---

组件中所有DOM节点的列表。

### --feedback--

想想refs如何存储一个可变对象，该对象具有访问`current`值的键。

## --video-solution--

1

## --text--

组件挂载后ref的值是什么？

## --answers--

始终是`null`。

### --feedback--

考虑ref附加到DOM元素后指向什么。

---

组件的props。

### --feedback--

考虑ref附加到DOM元素后指向什么。

---

React生成的随机值。

### --feedback--

考虑ref附加到DOM元素后指向什么。

---

ref附加到的DOM元素。

## --video-solution--

4