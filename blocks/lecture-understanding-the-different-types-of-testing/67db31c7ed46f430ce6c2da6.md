---
id: 67db31c7ed46f430ce6c2da6
title: Mocking、Faking和Stubbing之间有什么区别？
challengeType: 19
dashedName: what-are-the-differences-between-mocking-faking-and-stubbing
---

# --description--

Mocking是用模拟真实组件行为的虚假数据替换真实数据的过程。这允许测试人员和开发人员测试应用程序中的特定组件，而无需依赖外部依赖项。

mocking数据的一个常见用例是处理API调用时。想象一下你的应用程序中有这样的fetch调用：

```js
export const postService = {
  async getPosts() {
    const response = await fetch("https://api.example.com/posts");
    return response.json();
  },
};
```

如果你需要测试`postService`函数，你可以mock API响应，而不是连续进行API调用来获取数据。从API获取数据需要时间，并且依赖于网络可用性和服务器响应等外部因素。mocking API响应可以消除这些外部因素，让测试人员能够使用可预测的、受控的数据集。

这是一个mock API响应的例子：

```json
[
  {
    "id": 1,
    "title": "Understanding Async/Await in JavaScript",
    "content": "Async/Await makes asynchronous code look and behave like synchronous code...",
    "author": "Jane Doe",
    "created_at": "2025-04-10T14:32:00Z"
  },
  {
    "id": 2,
    "title": "10 Tips for Writing Clean Code",
    "content": "Clean code is not just about code formatting. It involves naming, architecture...",
    "author": "John Smith",
    "created_at": "2025-04-08T09:21:00Z"
  },
  {
    "id": 3,
    "title": "Exploring React 19 Features",
    "content": "React 19 comes with exciting features like new hooks and better performance...",
    "author": "Alex Lee",
    "created_at": "2025-04-07T18:47:00Z"
  }
]
```

现在我们了解了什么是mocking，让我们将其与stubbing进行比较。Stubs是返回预定义响应或虚拟数据的对象，用于应用程序中的预期行为。例如，你可以在测试中stub数据库连接的行为，而无需依赖实际的数据库连接。

这是Jest中stub的一个例子：

```js
import { postService } from "./postService";
import { db } from "./db";

jest.mock("./db", () => ({
  db: {
    fetchPosts: jest.fn(),
  },
}));

test("should return stubbed posts", async () => {
  const fakePosts = [
    { id: 1, title: "Stubbed Post", content: "This is a stubbed post." },
  ];

  db.fetchPosts.mockResolvedValue(fakePosts);

  const posts = await postService.getPosts();

  expect(posts).toEqual(fakePosts);
});
```

`db.fetchPosts.mockResolvedValue(fakePosts);`是这个例子中的stub。

最后要讨论的组件是fakes。Fakes是真实组件的简化版本，没有真实组件的复杂性或副作用。例如，你可以通过将数据存储在内存中而不是与真实数据库交互来fake一个数据库。这将允许你在内存中模拟数据库操作，这比处理真实数据库要快得多。另一个常见例子是在处理文件系统时使用fakes。在测试时，你可以创建一个fake文件系统来替代真实的文件系统。

当你继续构建更复杂的软件应用程序时，考虑在测试中适当使用mocks、stubs或fakes。

# --questions--

## --text--

以下哪项是在测试中使用mock的常见用例？

## --answers--

mocking HTML更改。

### --feedback--

参考课程开头讨论这一点的地方。

---

mocking CSS更改。

### --feedback--

Refer to the beginning of the lesson where this was discussed.

---

mocking API调用。

---

mocking JavaScript字符串方法。

### --feedback--

Refer to the beginning of the lesson where this was discussed.

## --video-solution--

3

## --text--

测试中的stubs是什么？

## --answers--

在测试环境中返回null的对象。

### --feedback--

想想你在测试场景中想要使用什么受控响应。

---

返回预定义响应的对象。

---

进行多次API调用的对象。

### --feedback--

想想你在测试场景中想要使用什么受控响应。

---

在React应用程序中对UI进行多次更新的对象。

### --feedback--

Think about what controlled responses you want to work with in testing scenarios.

## --video-solution--

2

## --text--

以下哪项是fake的常见用例？

## --answers--

fake POST请求的API调用。

### --feedback--

参考课程结尾讨论这一点的地方。

---

fake应用程序的样式。

### --feedback--

参考课程结尾讨论这一点的地方。

---

fake一个HTML文件。

### --feedback--

参考课程结尾讨论这一点的地方。

---

fake一个数据库。

## --video-solution--

4
