---
id: 6882913b2b58c2738eaaa2d1
title: 什么是 .gitignore 文件，其中应该包含哪些内容？
challengeType: 19
dashedName: what-is-a-gitignore-file-and-what-are-some-items-that-should-be-included-inside-it
---

# --description--

我们在之前的课程中简单提到了 `.gitignore` 文件。但这个文件到底是什么，你应该在里面放什么？

`.gitignore` 文件是一种与 Git 操作相关的特殊文件。名称表明这个文件用于告诉 Git 忽略东西，这是常见的用例。但它实际上做的是告诉 Git 停止跟踪文件。这个区别很重要，稍后会澄清。

你实际上应该在这个文件中放什么？你应该列出不想提交的内容。

首先是你的秘密文件。这可能是像 `.env` 文件一样的东西，你在其中存储了应用程序使用的 API 密钥。它可能是一个私有的 GPG 密钥文件，你的应用程序需要使用它进行身份验证。任何包含你不希望泄露给公众的敏感信息都应该用 `.gitignore` 忽略。即使你的仓库是私有的，你也应该像它是公开的一样行事——把它当作任何人都能看到它，并注意不要提交秘密。

让我们看看我们的文件现在可能是什么样子：

```sh
# Secrets
.env
github.key
```

我们告诉 Git 忽略 `.env` 文件，我们在其中保存我们的秘密。我们还告诉 Git 忽略 `github.key` 文件，其中包含一个私有的 GPG 密钥。

接下来要考虑的是你的项目使用的包或依赖项。例如，当你使用 Node.js 项目时，你可能会从 npm 安装包。这些包进入你项目中的 `node_modules` 文件夹，所以你的代码可以导入和使用它们。

但是 `node_modules` 文件夹变得异常庞大，你绝对不想提交所有这些包并在每次更新一个包时跟踪更改。相反，你提交你的 `package.json` 文件和相关的锁文件（例如 `package-lock.json`、`pnpm-lock.yaml`）。这些文件告诉 npm )安装哪些包和版本，所以贡献者可以安装与你使用的相同依赖项，而无需将它们提交到仓库。

让我们继续将 `node_modules` 添加到我们的 `.gitignore` 文件中：

```sh
# Secrets
.env
github.key

# Packages
node_modules
```

现在，让我们谈谈 `.gitignore` 文件的一个重要语法。当你添加像 `node_modules` 这样的条目时，Git 会忽略任何匹配该模式的内容。这意味着它会忽略你项目根目录中的 `node_modules` 目录，但也会忽略你项目 `client` 目录中的 `node_modules`。

如果你只想忽略根目录中的内容，你可以在行前加上正斜杠。`node_modules` 会变成 `/node_modules`。这会忽略根 `node_modules` 目录，但不会忽略 `client/node_modules` 目录。我们不希望这样，所以让我们将我们的条目保持为 `node_modules`。

接下来你要考虑忽略的是你的构建输出。例如，编译 TypeScript 项目可能会产生一个 `dist` 文件夹用于 JavaScript 输出。你不想提交这个输出，因为它会使 Git 历史膨胀。相反，你想忽略这个输出——贡献者可以通过运行相同的构建命令自己重现它。

让我们继续忽略 `dist` 文件夹：

```sh
# Secrets
.env
github.key

# Packages
node_modules

# Outputs
dist
```

有时，错误放置的文件可能导致 TypeScript 编译器崩溃，这会导致我们的 JavaScript 输出到处都是。由于我们专门编写 TypeScript，让我们继续使用 glob 语法忽略所有 JavaScript 文件：

```sh
# Secrets
.env
github.key

# Packages
node_modules

# Outputs
dist
*.js
```

你可能想要忽略的其他常见输出是 `coverage` 目录，用于单元测试覆盖率的结果，如果你使用 Angular 则是 `.angular` 目录，如果你使用 NextJS 则是 `.next` 目录，等等。

现在，我们可以坚持使用这里的内容。如果你使用生成文件的框架，你应该在文档中确认需要添加到 `.gitignore` 的内容。

第四批要忽略的东西是 IDE 文件。例如，Jetbrains 产品可能使用 `.idea` 文件夹进行 IDE 特定的配置。Visual Studio Code 使用 `.vscode` 文件夹。

这些通常最好忽略，因为它们会包含特定于你的本地环境的文件，其他贡献者不需要（因为他们使用自己的配置）。让我们继续添加 Visual Studio Code 目录，因为这是我们用作 IDE 的。

```sh
# Secrets
.env
github.key

# Packages
node_modules

# Outputs
dist
*.js

# IDE
.vscode
```

但我们的 `.vscode` 文件夹确实包含一个 `settings.json` 文件，其中包含一些可能对我们的贡献者有用的工作区特定内容——这个文件允许他们配置他们的扩展和环境，以更好地镜像我们自己的配置。

所以让我们继续使用否定语法来"取消忽略"该文件：

```sh
# Secrets
.env
github.key

# Packages
node_modules

# Outputs
dist
*.js

# IDE
.vscode
!.vscode/settings.json
```

如果你使用 MacOS，你可能熟悉 `.DS_STORE` 文件。这个文件包含 Finder 用来确定如何渲染目录的元数据（例如，使用缩略图或作为列表）。同样，Windows 用户可能会看到一个隐藏的 `Thumbs.db` 文件，它缓存目录的缩略图。

忽略这些文件通常是个好主意，因为它们是个人设置，对项目没有影响。让我们添加这两个文件：

```sh
# Secrets
.env
github.key

# Packages
node_modules

# Outputs
dist
*.js

# IDE
.vscode
!.vscode/settings.json

# System Files
.DS_STORE
Thumbs.db
```

关于忽略先前提交的文件的快速说明。假设你之前不小心提交了 `dist` 目录，但现在你想删除它并忽略它。你不能只是将它添加到你的 `.gitignore` 文件中——这不会使先前提交的内容消失，它告诉 Git 停止跟踪文件。所以如果你忽略一个已经提交的文件，Git 不会跟踪任何更改，但也不会跟踪文件的删除。

相反，你需要先删除文件。创建一个包含该删除的提交。然后你可以将该项目添加到你的 `.gitignore` 中，并创建第二个提交来更新它。从现在开始，当该文件再次创建时，Git 会忽略它，它不会出现在你的提交中。

最后，如果你在不同的语言中工作，比如 Python，你需要忽略的项目将与我们在这里讨论的不同。GitHub 维护了一个非常有用的 `.gitignore` 模板仓库，适用于各种语言和框架。你可以在 <a href="https://github.com/github/gitignore" target="_blank">https://github.com/github/gitignore</a> 找到这个列表。

有了这些，你现在准备好避免在你的仓库中提交你不想包含的文件了！

# --questions--

## --text--

`.gitignore` 文件的主要目的是什么？

## --answers--

从你的仓库中删除文件。

### --feedback--

想想 `.gitignore` 文件在 Git 操作中阻止什么发生。

---

告诉 Git 停止跟踪特定文件。

---

加密你仓库中的敏感数据。

### --feedback--

想想 `.gitignore` 文件在 Git 操作中阻止什么发生。

---

在提交之前压缩大文件。

### --feedback--

想想 `.gitignore` 文件在 Git 操作中阻止什么发生。

## --video-solution--

2

## --text--

如果你已经将文件提交到 Git，然后将其添加到 `.gitignore`，会发生什么？

## --answers--

文件将自动从仓库中删除。

### --feedback--

考虑课程中关于忽略先前提交的文件的内容。

---

文件将保留在仓库中，但未来的更改不会被跟踪。

---

Git 将抛出错误，直到你解决冲突。

### --feedback--

考虑课程中关于忽略先前提交的文件的内容。

---

文件将被隐藏但仍被 Git 跟踪。

### --feedback--

考虑课程中关于忽略先前提交的文件的内容。

## --video-solution--

2

## --text--

在 `.gitignore` 文件中使用什么语法来忽略目录中的所有文件，然后对一个特定文件进行例外处理？

## --answers--

使用 glob 通配符（`*`），然后否定（`!`）特定文件。

---

使用注释（`#`）手动指定例外。

### --feedback--

记住 `.vscode` 目录和 `settings.json` 文件的例子。

---

使用斜杠（`/`）指示目录结构。

### --feedback--

记住 `.vscode` 目录和 `settings.json` 文件的例子。

---

使用方括号（`[]`）创建模式排除。

### --feedback--

记住 `.vscode` 目录和 `settings.json` 文件的例子。

## --video-solution--

1