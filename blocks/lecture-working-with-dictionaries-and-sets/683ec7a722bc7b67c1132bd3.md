---
id: 683ec7a722bc7b67c1132bd3
title: 什么是字典，它们是如何工作的？
challengeType: 19
dashedName: what-are-dictionaries-and-how-do-they-work
---

# --description--

在 Python 中，字典是存储键值对集合的内置数据结构。它们的工作方式与真实字典非常相似，您在其中查找一个单词来找到其对应的含义。

使用 Python 字典，您使用键来查找其对应的值。当您需要将值与唯一键关联时，应该使用字典。当您需要基于键快速查找值，以及需要表示结构化数据时，这很有帮助。

这是 Python 字典的一般语法：

```python
dictionary = {
    key1: value1,
    key2: value2
}
```

首先，我们找到保存字典的变量。您不一定需要将字典分配给变量，但通常这样做很常见，以便将其保存在内存中并在代码的后续部分使用。

然后是花括号，有时也称为大括号。在花括号内，有键值对。

每个键都与一个值相关联，因此您可以使用键来访问该值。在每个值之后（最后一个除外），都有一个逗号来分隔不同的键值对。键在字典中必须是唯一的，并且必须是不可变的数据类型。然而，值可以重复，并且可以是任何数据类型。

这里我们有一个存储玛格丽特披萨食谱信息的字典示例：

```python
pizza = {
    'name': '玛格丽特披萨',
    'price': 8.9,
    'calories_per_slice': 250,
    'toppings': ['马苏里拉奶酪', '罗勒']
}
```

字典被分配给 `pizza` 变量。它有四个键值对：`name`、`price`、`calories_per_slice` 和 `toppings`。

另一种选择是使用 `dict()` 构造函数，它从键值对序列构建字典。

这是我们披萨示例的等效语法。我们将元组列表作为参数传递给 `dict()` 构造函数。这些元组包含键作为第一个元素，值作为第二个元素。

```python
pizza = dict([('name', '玛格丽特披萨'), ('price', 8.9), ('calories_per_slice', 250), ('toppings', ['马苏里拉奶酪', '罗勒'])])
```

要访问键值对的值，您可以使用这种称为括号表示法的语法。它是保存字典的变量名，后跟方括号，以及您想在方括号内访问的键：

```python
dictionary[key]
```

在我们的披萨示例中，如果您想访问 `name` 的值，您会写变量名 `pizza`，后跟方括号，以及带引号的键 `name`：

```python
pizza['name']
```

这将计算为：

```python
'玛格丽特披萨'
```

要更新值，您只需要添加赋值运算符，后跟新值。

如果键在字典中不存在，将创建一个新的键值对。在最近版本的 Python 中，字典保持插入顺序。当您需要遍历字典时，这很有帮助：

```python
pizza['name'] = '玛格丽特'
```

现在键 `name` 的值是 `'玛格丽特'`：

```python
print(pizza['name']) # '玛格丽特'
```

字典还有一些有用的方法来执行常见操作。

`.get()` 方法检索与键关联的值。它类似于我们刚刚使用的括号表示法，但它的优势是您可以设置默认值，因此如果键不存在，您不会得到错误：

```python
dictionary.get(key, default)
```

在这个例子中，如果 `toppings` 键不存在，它将返回一个空列表，这是我们在这里作为第二个参数传递的默认值。但如果 `toppings` 存在，它将返回该值：

```python
pizza.get('toppings', []) # ['马苏里拉奶酪', '罗勒']
```

`.keys()` 和 `.values()` 方法分别返回包含字典中所有键和值的视图对象：

```python
pizza.keys()
# dict_keys(['name', 'price', 'calories_per_slice'])

pizza.values()
# dict_values(['玛格丽特披萨', 8.9, 250])
```

视图对象只是查看字典内容的一种方式，而无需创建数据的单独副本。

`.items()` 方法返回包含字典中所有键值对的视图对象，包括键和值：

```python
pizza.items()
# dict_items([('name', '玛格丽特披萨'), ('price', 8.9), ('calories_per_slice', 250)])
```

`.clear()` 方法从字典中删除所有键值对：

```python
pizza.clear()
```

`.pop()` 方法删除您在第一个参数中指定键的键值对并返回其值。如果键不存在，它返回您在第二个参数中指定的默认值。如果键不存在且您没有传递默认值，则会引发 `KeyError`：

```python
pizza.pop('price', 10)
pizza.pop('total_price') # KeyError
```

在 Python 3.7 及更高版本中，`.popitem()` 方法删除最后插入的项目：

```python
pizza.popitem()
```

最后，`.update()` 方法使用另一个字典的键值对更新键值对。如果它们有共同的键，则它们的值会被覆盖。

在这个例子中，我们正在更新 `pizza` 字典。`price` 键在两者中都存在，因此其值将被替换为 `15`。

但 `total_time` 是新的，因此它将作为新的键值对添加到 `pizza` 字典中：

```python
pizza.update({ 'price': 15, 'total_time': 25 })
```

这是更新后的字典，包含更新的 `price` 和新的 `total_time`。注意价格现在是 `15`，`total_time` 是一个新的键值对：

```python
{
    'name': '玛格丽特披萨', 
    'price': 15, 
    'calories_per_slice': 250, 
    'toppings': ['马苏里拉奶酪', '罗勒'], 
    'total_time': 25
}
```

这些是一些最常用的字典方法，但还有很多其他方法。选择正确的方法有助于高效地执行复杂操作。

# --questions--

## --text--

Python 字典中的元素主要如何组织和访问？

## --answers--

使用顺序索引，如列表。

### --feedback--

想想区分字典与列表和元组的核心特征。

---

使用键值对，其中键是唯一的。

---

使用树状结构，类似于文件系统。

### --feedback--

想想区分字典与列表和元组的核心特征。

---

使用链表，其中元素指向下一个。

### --feedback--

想想区分字典与列表和元组的核心特征。

## --video-solution--

2

## --text--

Python 字典的主要特征是什么，使其与列表或元组不同？

## --answers--

字典创建所有键值对的副本。

### --feedback--

想想使字典特别有助于基于名称或标签检索数据的特征。

---

字典是可变的。

### --feedback--

想想使字典特别有助于基于名称或标签检索数据的特征。

---

字典允许使用键进行快速查找。

---

字典可以存储重复的值。

### --feedback--

想想使字典特别有助于基于名称或标签检索数据的特征。

## --video-solution--

3

## --text--

哪种字典方法用于检索与键关联的值，并在找不到键时提供默认值？

## --answers--

`.keys()`

### --feedback--

想想哪种方法设计用于安全地检索值而不会抛出错误。

---

`.values()`

### --feedback--

想想哪种方法设计用于安全地检索值而不会抛出错误。

---

`.pop()`

### --feedback--

想想哪种方法设计用于安全地检索值而不会抛出错误。

---

`.get()`

## --video-solution--

4