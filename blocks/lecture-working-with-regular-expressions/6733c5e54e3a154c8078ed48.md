---
id: 6733c5e54e3a154c8078ed48
title: 什么是正则表达式量词，它们是如何工作的？
challengeType: 19
dashedName: what-are-regex-quantifiers-and-how-do-they-work
---

# --interactive--

让我们学习正则表达式中的量词。

考虑一个您想要匹配四位数标识代码的场景。您知道可以使用[\d]字符类，所以您可能会写四次。为了避免任何多余的字符，您会在两端包含起始和结束锚点：

```js
const regex = /^\d\d\d\d$/;
```

这确实有效——它会匹配四个数字字符。但与其多次写入相同的类，您可以给它一个量词。

量词由包含一个或两个数字的花括号定义。让我们在模式中使用量词：

```js
const regex = /^\d{4}$/;
```

注意我们的量词只包含数字[4]。这种语法意味着"精确匹配前一个字符四次"。让我们看看它的行为：

:::interactive_editor

```js
const regex = /^\d{4}$/;
console.log(regex.test("123")); // false
console.log(regex.test("1234")); // true
console.log(regex.test("12345")); // false
console.log(regex.test("123456")); // false
console.log(regex.test("1234567")); // false
```

:::

模式只匹配恰好四位数的字符串，因为我们使用了锚点，我们的量词只允许恰好四位数。但是也许标识代码只需要最少四位数。

要允许四位数或更多位数，在量词中的数字后添加逗号：

```js
const regex = /^\d{4,}$/;
```

现在，我们的语法允许模式匹配四位数或更多位数。让我们测试一下：

:::interactive_editor

```js
const regex = /^\d{4,}$/;
console.log(regex.test("123")); // false
console.log(regex.test("1234")); // true
console.log(regex.test("12345")); // true
console.log(regex.test("123456")); // true
console.log(regex.test("1234567")); // true
```

:::

七位数的标识符相当长。这些标识符应该最多有6位数，最少有4位数。要实现这一点，您可以在量词的逗号后添加第二个数字：

```js
const regex = /^\d{4,6}$/;
```

现在我们的模式不再匹配七位数标识符，因为它超过了我们六位数的最大值。

:::interactive_editor

```js
const regex = /^\d{4,6}$/;
console.log(regex.test("123")); // false
console.log(regex.test("1234")); // true
console.log(regex.test("12345")); // true
console.log(regex.test("123456")); // true
console.log(regex.test("1234567")); // false
```

:::

请注意，您不能单独使用此语法来设置最大值——您必须始终设置最小值。但如果将最小值设置为[1]，您可以有效地实现相同的结果。

我们收到了用户的更新要求。标识符现在可以选择以字母开头。我们已经知道这个字符类，所以让我们将其添加到我们的正则表达式中：

```js
const regex = /^[a-zA-Z]\d{4,6}$/;
```

但是现在我们强制要求存在字母。我们如何使其成为可选的？

您可以使用量词语法，最小值为[0]，最大值为[1]：

```js
const regex = /^[a-zA-Z]{0,1}\d{4,6}$/;
```

但实际上有一个特殊的简写量词用于单个可选字符——问号（[?]）。让我们用问号替换我们的量词：

```js
const regex = /^[a-zA-Z]?\d{4,6}$/;
```

我们应该验证结果：

:::interactive_editor

```js
const regex = /^[a-zA-Z]?\d{4,6}$/;
console.log(regex.test("123")); // false
console.log(regex.test("a1234")); // true
console.log(regex.test("12345")); // true
console.log(regex.test("az12345")); // false
console.log(regex.test("X123456")); // true
console.log(regex.test("1234567")); // false
```

:::

我们的模式现在允许一个可选字母，后跟四到六位数字。

不幸的是，我们刚刚意识到我们读错了要求。我们需要允许在数字之前有任意数量的字母。我们可以使用量词，最小值为[0]，没有定义的最大值：

```js
const regex = /^[a-zA-Z]{0,}\d{4,6}$/;
```

但是我们的模式又变长了。值得庆幸的是，还有另一个简写方式表示"匹配前一个字符零次或多次"——星号（[*]）符号。让我们在模式中用它替换我们的量词并进行测试：

:::interactive_editor

```js
const regex = /^[a-zA-Z]*\d{4,6}$/;
console.log(regex.test("123")); // false
console.log(regex.test("a1234")); // true
console.log(regex.test("12345")); // true
console.log(regex.test("az12345")); // true
console.log(regex.test("X123456")); // true
console.log(regex.test("1234567")); // false
```

:::

现在我们成功匹配了零个或多个字母后跟四到六个数字的任何标识符。但事实证明这正在崩溃我们的系统——我们实际上必须要求至少一个字母。

同样，我们可以使用最小值为一且没有定义最大值的量词，或者我们可以使用另一个特殊语法——加号（[+]）符号：

:::interactive_editor

```js
const regex = /^[a-zA-Z]+\d{4,6}$/;
console.log(regex.test("123")); // false
console.log(regex.test("a1234")); // true
console.log(regex.test("12345")); // false
console.log(regex.test("az12345")); // true
console.log(regex.test("X123456")); // true
console.log(regex.test("1234567")); // false
```

:::

现在不以至少一个字母开头的标识符失败了，无论有多少数字。

您可以使用量词大大增强正则表达式的简洁性和可读性。

# --questions--

## --text--

正则表达式中的量词[{4,6}]是什么意思？

## --answers--

精确匹配四次或六次。

### --feedback--

考虑量词中指定的最小值和最大值。

---

至少匹配四次，但不超过六次。

---

总共匹配四到六个字符。

### --feedback--

考虑量词中指定的最小值和最大值。

---

匹配四次或六次数字。

### --feedback--

考虑量词中指定的最小值和最大值。

## --video-solution--

2

## --text--

在正则表达式中，哪个量词符号等价于[{0,1}]？

## --answers--

[*]

### --feedback--

课程提到了"单个可选字符的特殊简写量词"。

---

[+]

### --feedback--

课程提到了"单个可选字符的特殊简写量词"。

---

[?]

---

[^]

### --feedback--

课程提到了"单个可选字符的特殊简写量词"。

## --video-solution--

3

## --text--

正则表达式中的[+]量词是什么意思？

## --answers--

匹配零次或多次。

### --feedback--

课程将此量词描述为需要"至少一个"前导元素。

---

精确匹配一次。

### --feedback--

课程将此量词描述为需要"至少一个"前导元素。

---

匹配一次或多次。

---

匹配零次或一次。

### --feedback--

课程将此量词描述为需要"至少一个"前导元素。

## --video-solution--

3