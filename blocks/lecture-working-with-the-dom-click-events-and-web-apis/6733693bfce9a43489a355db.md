---
id: 6733693bfce9a43489a355db
title: 什么是DOMContentLoaded事件，它是如何工作的？
challengeType: 19
dashedName: what-is-the-domcontentloaded-event-and-how-does-it-work
---

# --interactive--

[DOMContentLoaded](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L17-L19)事件在HTML文档中的所有内容都被加载和解析后触发。如果你有外部样式表或图像，[DOMContentLoaded](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L17-L19)事件不会等待这些资源加载完成。它只会等待HTML加载完成。

这与[load](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L12-L12)事件不同，[load](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L12-L12)事件会等待所有内容加载完成，包括外部样式表、图像等。

以下是使用[DOMContentLoaded](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L17-L19)事件的示例语法：

```js
document.addEventListener("DOMContentLoaded", function () {
  console.log("DOM is loaded.");
});
```

一旦DOM加载完成，函数将被执行，并且消息[DOM is loaded.](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L18-L18)将被记录到控制台。

现在，让我们看另一个使用[DOMContentLoaded](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L17-L19)事件的示例。在这个示例中，我们在HTML中有一个图像。要更新图像，我们可以创建一个更改图像[src](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368f272706633516e4873.md#L76-L76)和[alt](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L44-L44)属性的函数：

:::interactive_editor

```html
<h1>Image Change on DOM Loaded</h1>
<img
  id="example-img"
  src="https://cdn.MasterPuti.org/curriculum/cat-photo-app/relaxing-cat.jpg"
  alt="Cat relaxing"
/>

<script src="index.js"></script>
```

```js
function changeImg() {
  const img = document.getElementById("example-img");
  img.src =
    "https://cdn.MasterPuti.org/curriculum/responsive-web-design-principles/FCCStickers-CamperBot200x200.jpg";
  img.alt = "CamperBot sticker";
  console.log("image was just changed");
}

changeImg();
```

:::

然后我们可以检查DOM是否仍在加载，并为[DOMContentLoaded](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L17-L19)事件添加事件监听器。如果[DOMContentLoaded](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L17-L19)事件已经触发，我们可以直接调用[changeImg](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L40-L46)函数：

```js
if (document.readyState === "loading") {
  document.addEventListener("DOMContentLoaded", changeImg);
} else {
  console.log("DOMContentLoaded has already fired");
  changeImg();
}
```

如果你运行这段代码并刷新页面，你会看到在DOM加载后图像更改为新图像。发生得相当快，但你会看到图像更改时的轻微闪烁。

当你想要在DOM加载后立即运行一些JavaScript代码，但在所有外部资源（如图像和样式表）加载之前运行时，[DOMContentLoaded](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L17-L19)事件非常有用。

# --questions--

## --text--

[DOMContentLoaded](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L17-L19)事件表示什么？

## --answers--

所有外部资源都已完全加载。

### --feedback--

这个事件不会等待图像或样式表。

---

HTML文档已完全加载和解析。

---

浏览器已完成页面渲染。

### --feedback--

这个事件不会等待图像或样式表。

---

页面上的所有图像都已完全加载。

### --feedback--

这个事件不会等待图像或样式表。

## --video-solution--

2

## --text--

[DOMContentLoaded](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L17-L19)事件与[load](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L12-L12)事件有何不同？

## --answers--

[DOMContentLoaded](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L17-L19)等待图像加载，而load不等待。

### --feedback--

考虑每个事件等待哪些资源。

---

[DOMContentLoaded](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L17-L19)在所有资源加载之前触发，而load等待所有资源。

---

[DOMContentLoaded](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L17-L19)只能与外部脚本一起使用。

### --feedback--

考虑每个事件等待哪些资源。

---

没有区别；它们是同一事件。

### --feedback--

考虑每个事件等待哪些资源。

## --video-solution--

2

## --text--

在提供的示例中，如果脚本运行时[DOMContentLoaded](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L17-L19)事件已经触发会发生什么？

## --answers--

图像将完全不会改变。

### --feedback--

想想代码中的条件检查。

---

将发生错误。

### --feedback--

想想代码中的条件检查。

---

[changeImg](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733693bfce9a43489a355db.md#L40-L46)函数将被直接调用。

---

事件监听器将再次添加。

### --feedback--

想想代码中的条件检查。

## --video-solution--

3