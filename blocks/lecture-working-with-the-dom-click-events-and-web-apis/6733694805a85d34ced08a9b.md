---
id: 6733694805a85d34ced08a9b
title: setTimeout和setInterval方法是如何工作的？
challengeType: 19
dashedName: how-do-the-settimeout-and-setinterval-methods-work
---

# --interactive--

在构建程序时，你经常希望某些事情在延迟后发生，或以规律的间隔重复发生。这就是[setTimeout()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L25-L27)和[setInterval()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L57-L59)方法派上用场的地方。这两种方法都接受两个参数：一个函数和一个延迟时间。

让我们更详细地看看每种方法，这样你就可以在Web项目中开始使用它们了。

[setTimeout()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L25-L27)让你延迟指定时间后执行操作。以下是[setTimeout()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L25-L27)方法的基本语法：

```js
setTimeout(functionToRun, delay);
```

[functionToRun](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L17-L17)是你希望在指定延迟后执行的代码，而[delay](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L17-L17)是运行函数前等待的时间（以毫秒为单位）。这是一个示例：

:::interactive_editor

```js
setTimeout(function () {
 console.log("This runs after 3 seconds");
}, 3000);
```

:::

你也可以为回调函数使用箭头函数，像这样：

:::interactive_editor

```js
setTimeout(() => {
 console.log("This runs after 3 seconds"); 
}, 3000);
```

:::

[setInterval()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L57-L59)会以设定的间隔重复执行函数。就像有一个每隔几秒响一次的闹钟。当你希望某些事情反复发生时，[setInterval()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L57-L59)是完美的选择，比如刷新数据或创建持续移动的动画。

就像[setTimeout()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L25-L27)一样，它接受一个函数和一个延迟时间：

```js
setInterval(functionToRun, delay);
```

[functionToRun](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L49-L49)是你想要重复运行的代码，而[delay](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L49-L49)是每次执行该函数之间的时间（以毫秒为单位）。这是一个示例：

:::interactive_editor

```js
setInterval(() => {
 console.log("This runs every 2 seconds");
}, 2000);

// Result:
// This runs every 2 seconds
// This runs every 2 seconds
// This runs every 2 seconds
// ...
```

:::

由于[setInterval()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L57-L59)会在指定间隔内持续执行提供的函数，你可能想要停止它。要做到这一点，你必须使用[clearInterval()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L82-L82)方法。

为了完成这项工作，[clearInterval()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L82-L82)需要你想要停止的[setInterval()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L57-L59)的ID。这可以是你分配给间隔的变量。一种停止间隔的方法是在[setTimeout()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L25-L27)内部，因为这样会在一定时间后停止间隔：

:::interactive_editor

```js
const intervalID = setInterval(() => {
 console.log("This will stop after 5 seconds");
}, 1000);

setTimeout(() => {
 clearInterval(intervalID);
}, 5000);
```

:::

你也可以使用[clearTimeout()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L97-L97)方法停止超时：

:::interactive_editor

```js
let timeoutID = setTimeout(() => {
 console.log("This will not run");
}, 5000);

clearTimeout(timeoutID);
```

:::

使用这段代码，[setTimeout()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L93-L95)将根本不会运行。所以，一种更优雅的方式是通过DOM，通过向按钮添加点击事件监听器来停止超时：

:::interactive_editor

```html
<h1>Cancel Timeout Example</h1>
<button id="cancelButton">Cancel Timeout</button>
<script src="script.js"></script>
```

```js
let timeoutID = setTimeout(() => {
  console.log("This will run if not canceled");
}, 5000);

document
.querySelector("#cancelButton")
.addEventListener("click", () => {
  clearTimeout(timeoutID);
  console.log("Timeout canceled!");
});
```

:::

# --questions--

## --text--

[setTimeout()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L25-L27)和[setInterval()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L57-L59)方法都接受什么作为参数？

## --answers--

一个变量和一个数字。

### --feedback--

想想需要执行什么以及等待多长时间。

---

一个函数和一个延迟时间。

---

一个字符串和一个布尔值。

### --feedback--

想想需要执行什么以及等待多长时间。

---

一个循环和一个条件。

### --feedback--

想想需要执行什么以及等待多长时间。

## --video-solution--

2

## --text--

JavaScript中的[setInterval()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L57-L59)方法做什么？

## --answers--

它在延迟后运行一次函数。

### --feedback--

想想在规律间隔重复运行的函数。

---

它在设定的间隔内重复运行函数，就像每隔几秒响一次的闹钟。

---

它阻止函数执行。

### --feedback--

想想在规律间隔重复运行的函数。

---

它暂停函数一段设定的时间。

### --feedback--

想想在规律间隔重复运行的函数。

## --video-solution--

2

## --text--

JavaScript中的[setTimeout()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L25-L27)方法做什么？

## --answers--

它延迟指定时间后执行操作并运行函数。

---

它在被调用后立即运行函数。

### --feedback--

想想你希望JavaScript在执行函数前等待的时候。

---

它以规律间隔重复函数。

### --feedback--

想想你希望JavaScript在执行函数前等待的时候。

---

它在延迟后阻止函数运行。

### --feedback--

想想你希望JavaScript在执行函数前等待的时候。

## --video-solution--

1