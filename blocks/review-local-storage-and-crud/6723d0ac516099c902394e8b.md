---
id: 6723d0ac516099c902394e8b
title: 本地存储和CRUD复习
challengeType: 31
dashedName: review-local-storage-and-crud
---

# --description--

## 持久化存储

- **定义**：持久化存储是指以一种方式保存数据，即使断电或设备重启后数据仍然可用。

## 创建、读取、更新、删除（CRUD）

- **创建**：这是指创建新数据的过程。例如，在Web应用程序中，这可能是用户向博客添加新文章。
- **读取**：这是从数据库检索数据的操作。例如，当你访问博客文章或查看网站上的个人资料时，你正在执行读取操作以获取和显示存储在数据库中的数据。
- **更新**：这涉及修改数据库中的现有数据。例如，编辑博客文章或更新个人资料信息。
- **删除**：这是从数据库中删除数据的操作。例如，当你删除博客文章或账户时，你正在执行删除操作。

## HTTP方法

- **定义**：HTTP代表超文本传输协议，它是Web上数据通信的基础。有HTTP方法定义了可以在Web上对资源执行的操作。常见的方法有GET、POST、PUT、PATCH、DELETE。
- **`GET`方法**：用于从服务器获取数据。
- **`POST`方法**：用于向服务器提交数据，创建新资源。
- **`PUT`方法**：用于通过完全替换来更新资源。
- **`PATCH`方法**：用于部分更新资源。
- **`DELETE`方法**：用于从数据库中删除记录。

## `localStorage`和`sessionStorage`属性

- **Web存储API**：此API为浏览器提供了一种机制，可以在浏览器内存储键值对，允许开发人员存储可在不同页面重新加载和会话中使用的信息。Web存储API的两个主要组件是`localStorage`和`sessionStorage`属性。
- **`localStorage`属性**：`localStorage`是Web存储API的一部分，它允许数据在浏览器窗口关闭或页面刷新后仍然存在。此数据将保持可用，直到应用程序或用户明确删除它。
- **`localStorage.setItem()`方法**：此方法用于在`localStorage`中存储键值对。

```js
localStorage.setItem('username', 'Jessica');
```

- **`localStorage.getItem()`方法**：此方法用于从`localStorage`中检索给定键的值。

```js
localStorage.setItem('username', 'codingRules');

let username = localStorage.getItem('username');
console.log(username); // codingRules
```

- **`localStorage.removeItem()`方法**：此方法用于使用其键从`localStorage`中删除特定项目。

```js
localStorage.removeItem('username');
```

- **`localStorage.clear()`方法**：此方法用于清除`localStorage`中存储的所有数据。

```js
localStorage.clear();
```

- **`sessionStorage`属性**：存储仅在当前会话期间持续的数据，并在浏览器标签页或窗口关闭时清除。
- **`sessionStorage.setItem()`方法**：此方法用于在`sessionStorage`中存储键值对。

```js
sessionStorage.setItem('cart', '3 items');
```

- **`sessionStorage.getItem()`方法**：此方法用于从`sessionStorage`中检索给定键的值。

```js
sessionStorage.setItem('cart', '3 items');

let cart = sessionStorage.getItem('cart');
console.log(cart); // '3 items'
```

- **`sessionStorage.removeItem()`方法**：此方法用于使用其键从`sessionStorage`中删除特定项目。

```js
sessionStorage.removeItem('cart');
```

- **`sessionStorage.clear()`方法**：此方法用于清除`sessionStorage`中存储的所有数据。

```js
sessionStorage.clear();
```

## 使用Cookie

- **定义**：Cookie，也称为Web Cookie或浏览器Cookie，是服务器发送给用户Web浏览器的小数据片段。这些Cookie存储在用户的设备上，并在后续请求中发送回服务器。Cookie对于帮助Web应用程序保持状态和记住用户信息至关重要，这尤其重要，因为HTTP是无状态协议。
- **会话Cookie**：这些Cookie仅在用户在网站上的会话期间持续。一旦用户关闭浏览器或标签页，会话Cookie就会被删除。这些Cookie通常用于在用户访问期间保持用户登录状态。
- **安全Cookie**：这些Cookie仅通过HTTPS发送，确保它们在传输过程中不会被攻击者拦截。
- **HttpOnly Cookie**：这些Cookie无法被浏览器中运行的JavaScript访问或修改，使它们更能抵御跨站脚本（XSS）攻击。
- **Set-Cookie头**：当你访问网站时，服务器可以在HTTP响应中发送Set-Cookie头。此头告诉浏览器保存具有特定信息的Cookie。例如，它可能存储一个唯一ID，帮助网站在你下次访问时识别你。你可以使用`document.cookie`在JavaScript中手动设置Cookie：

```js
document.cookie = "organization=MasterPuti; expires=Fri, 31 Dec 2021 23:59:59 GMT; path=/";
```

要删除Cookie，你可以将其过期日期设置为过去的某个时间。

```js
document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";
```

## 缓存API

- **定义**：缓存是将文件副本存储在临时存储位置的过程，以便可以更快地访问它们。缓存API用于存储网络请求和响应，使Web应用程序更高效地工作，甚至可以离线运行。它是更广泛的Service Worker API的一部分，对于创建能在不可靠或缓慢网络条件下工作的渐进式Web应用程序（PWA）至关重要。缓存API是一种存储机制，用于存储请求和响应对象。当向服务器发出请求时，应用程序可以存储响应，然后从缓存中检索它，而不是发出新的网络请求。这减少了加载时间，节省了带宽，并改善了整体用户体验。
- **缓存存储**：这用于存储HTTP请求及其相应响应的键值对。这使得能够高效检索先前请求的资源，减少了在后续访问时从网络获取它们的需求，从而提高了性能。
- **缓存控制**：开发人员可以定义缓存资源应保留多长时间，以及是否应重新验证或直接从缓存提供。
- **离线支持**：通过使用缓存API，你可以创建离线优先的Web应用程序。例如，PWA可以在用户断开网络连接时提供缓存资产。

## 负面模式和客户端存储

- **过度跟踪**：这是指在客户端存储（如Cookie、本地存储或会话存储）中收集和存储过多用户数据的做法，而没有明确的知情同意或合法需求。这通常涉及跨多个站点或会话跟踪用户行为、偏好和交互，这可能侵犯用户隐私。
- **浏览器指纹识别**：一种基于设备和浏览器独特特征来跟踪和识别单个用户的技术，而不是依赖Cookie或其他传统跟踪方法。与存储在用户设备上的Cookie不同，指纹识别涉及收集可用于创建用户浏览器会话独特"指纹"的一系列信息。
- **在LocalStorage中设置密码**：这可能看起来是一个更明显的负面模式，但在本地存储中设置任何敏感数据（如密码）都会带来安全风险。本地存储未加密，可以轻松访问。因此，你不应该在其中存储任何类型的敏感数据。

## IndexedDB

- **定义**：IndexedDB用于在浏览器中存储结构化数据。这内置于现代Web浏览器中，允许Web应用程序高效地存储和获取JavaScript对象。

## 缓存/Service Workers

- **定义**：Service Worker是在后台运行的脚本，与你的网页分离。它可以拦截网络请求，访问缓存，并使Web应用程序离线工作。这是渐进式Web应用程序的关键组件。

# --assignment--

复习本地存储和CRUD主题和概念。