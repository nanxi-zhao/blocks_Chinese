---
id: 6724e24864b0771a4c4c9dc9
title: 测试复习
challengeType: 31
dashedName: review-testing
---

# --description--

## 手动测试和自动化测试

- **手动测试**：在手动测试中，测试人员将手动检查应用程序的每个部分，测试不同的功能以确保其正常工作。如果在测试过程中发现任何错误，测试人员会将这些错误报告给软件团队，以便他们可以修复。
- **自动化测试**：在自动化测试中，你可以编写一个单独的程序来自动化测试，检查应用程序是否按预期行为。

## 单元测试

- **单元测试**：在单元测试中，你测试每个函数以确保一切按预期工作。单元测试也可以作为应用程序的文档形式，因为它们旨在表示代码的预期行为。
- **单一职责原则**：单一职责原则建议保持每个函数小而负责一件事。
- **常见的JavaScript测试框架**：一些常见的测试框架包括Jest、Mocha和Vitest。Jest是一个流行的单元测试框架。

以下是使用Jest的单元测试示例。

首先，你可以创建一个负责返回新格式化字符串的函数：

```javascript
export function getFormattedWord(str) {
  if (!str) return '';
  return str.charAt(0).toUpperCase() + str.slice(1);
}
```

在单独的`getFormattedWord.test.js`文件中，你可以编写一些测试来验证函数是否按预期工作。`getFormattedWord.test.js`文件将如下所示：

```javascript
import { getFormattedWord } from "./getFormattedWord.js";
import { test, expect } from "jest";

test('将单词的第一个字母大写', () => {
  expect(getFormattedWord('hello')).toBe('Hello');
});
```

- **`expect`函数**：`expect`函数用于测试一个值。
- **匹配器**：匹配器是一个函数，用于检查值是否按预期行为。在上面的示例中，匹配器是`toBe()`。Jest有各种匹配器。

要使用Jest，你首先需要使用`npm i jest`安装`jest`包。你还需要在`package.json`文件中添加一个脚本，如下所示：

```js
"scripts": {
  "test": "jest"
},
```

然后，你可以运行命令`npm run test`来运行你的测试。

## 软件开发生命周期

- **软件开发生命周期的不同阶段**：
  - **规划阶段**：开发团队从利益相关者那里收集拟议工作的需求。
  - **设计阶段**：软件团队分解需求并决定最佳的解决方案方法。
  - **实现阶段**：软件团队将需求分解为可管理的任务并实现它们。
  - **测试阶段**：这涉及对新工作的手动和自动化测试。有时，团队在整个开发阶段测试应用程序以发现和修复出现的任何问题。
  - **部署阶段**：团队将新更改部署到构建或测试环境。
  - **维护阶段**：这涉及修复生产应用程序中客户出现的任何问题。

- **软件开发生命周期的不同模型**：
  - **瀑布模型**：瀑布模型是指生命周期的每个阶段都需要在下一个阶段开始之前完成。
  - **敏捷模型**：敏捷模型专注于通过将工作分解为冲刺来进行迭代开发。

## BDD和TDD

- **TDD**：测试驱动开发是一种强调先编写测试的方法论。在构建功能之前编写测试为开发人员在开发过程中提供实时反馈。
- **BDD**：行为驱动开发是将一系列测试与业务目标对齐的方法。BDD中的测试场景应该用技术和非技术人员都能理解的语言编写。这种语法的一个例子是Gherkin。
- **BDD测试框架**：BDD测试框架的示例包括Cucumber、JBehave和SpecFlow。

## 单元测试中的断言

- **断言**：断言用于测试代码是否按预期行为。
- **断言库**：Chai是一个常用的断言库。其他常见的JavaScript断言库是`should.js`和`expect.js`。

以下是使用Chai的断言示例，检查`addThreeAndFour`函数的返回值是否等于数字7：

```js
assert.equal(addThreeAndFour(), 7);
```

- **最佳实践**：无论你使用哪个断言库，你都应该编写清晰的断言和失败消息，这将帮助你理解哪些测试失败以及为什么失败。

## 模拟、伪造和存根

- **模拟**：模拟是用模拟真实组件行为的虚假数据替换真实数据的过程。例如，你可以在测试中模拟API响应，而不是连续进行API调用来获取数据。
- **存根**：存根是为应用程序中的预期行为返回预定义响应或虚拟数据的对象。例如，你可以在测试中存根数据库连接的行为，而无需依赖实际的数据库连接。
- **伪造**：伪造是没有复杂性或副作用的真实组件的简化版本。例如，你可以通过将数据存储在内存中而不是与真实数据库交互来伪造数据库。这将允许你在内存中模拟数据库操作，这比处理真实数据库要快得多。

## 功能测试

- **功能测试**：功能测试检查应用程序的功能和特性是否按预期工作。功能测试的目标是针对多种场景测试整个系统。
- **非功能测试**：非功能测试关注性能和可靠性等问题。
- **冒烟测试**：冒烟测试是在开始更广泛测试之前对系统进行的基本或关键问题的初步检查。

## 端到端测试

- **端到端测试**：端到端测试或E2E测试从用户的角度测试真实世界的场景。端到端测试有助于确保你的应用程序行为正确并对用户可预测。然而，设置、设计和维护它很耗时。
- **端到端测试框架**：Playwright是微软开发的流行端到端测试框架。其他端到端测试工具的示例包括Cypress、Selenium和Puppeteer。

以下是使用Playwright从MasterPuti代码库中获取的E2E测试示例。`beforeEach`钩子将在每个测试之前运行。测试检查捐赠者在菜单栏中是否有支持者链接，以及他们的头像周围是否有特殊样式边框：

```js
test.beforeEach(async ({ page }) => {
  execSync("node ./tools/scripts/seed/seed-demo-user --set-true isDonating");
  await page.goto("/donate");
});

...

test("菜单应该有一个支持者链接", async ({ page }) => {
  const menuButton = page.getByTestId("header-menu-button");
  const menu = page.getByTestId("header-menu");

  await expect(menuButton).toBeVisible();
  await menuButton.click();

  await expect(menu).toBeVisible();

  await expect(page.getByRole("link", { name: "Supporters" })).toBeVisible();
});

test("捐赠者的头像应该有特殊边框", async ({ page }) => {
  const container = page.locator(".avatar-container");
  await expect(container).toHaveClass("avatar-container gold-border");
});
```

## 可用性测试

- **可用性测试**：可用性测试是让真实用户与应用程序交互，以发现应用程序中是否存在任何设计、用户体验或功能问题。可用性测试关注用户对应用程序的直观性。
- **四种常见的可用性测试类型**：
  - **探索性**：探索性可用性测试涉及用户与应用程序的不同功能交互，以更好地了解它们的工作原理。
  - **比较性**：比较测试是将你的应用程序用户体验与市场上的类似应用程序进行比较。
  - **评估性**：评估测试是研究应用程序使用的直观性。
  - **验证性**：验证测试是识别任何会阻止用户有效使用应用程序的主要问题。
- **可用性测试工具**：可用性测试工具的示例包括Loop11、Maze、Userbrain、UserTesting和UXTweak。

## 兼容性测试

- **兼容性测试**：兼容性测试的目标是确保你的应用程序在不同的计算环境中工作。
- **不同类型的兼容性测试**：
  - **向后兼容性**：向后兼容性是指软件与早期版本兼容。
  - **向前兼容性**：向前兼容性是指软件和系统将与未来版本一起工作。
  - **硬件兼容性**：硬件兼容性是软件在不同硬件配置中正常工作的能力。
  - **操作系统兼容性**：操作系统兼容性是软件在不同操作系统上工作的能力，如macOS、Windows和Linux发行版如Ubuntu和Fedora。
  - **网络兼容性**：网络兼容性意味着软件可以在不同的网络条件下工作，如不同的网络速度、协议、安全设置等。
  - **浏览器兼容性**：浏览器兼容性意味着Web应用程序可以在不同的浏览器中一致工作，如Google Chrome、Safari、Firefox等。
  - **移动兼容性**：确保你的软件应用程序在各种Android和iOS设备上工作很重要，包括手机和平板电脑。

## 性能测试

- **性能测试**：在性能测试中，你测试应用程序在不同工作负载下的速度、响应性、可扩展性和稳定性。目标是解决任何类型的性能瓶颈。
- **不同类型的性能测试**：
  - **负载测试**：负载测试确定系统在正常和峰值负载时间的行为。
  - **压力测试**：压力测试是你在极端负载下测试应用程序，看系统对更高负载的响应情况。
  - **浸泡测试（耐久性测试）**：浸泡测试或耐久性测试是一种负载测试，你在较长时间内用更高负载测试系统。
  - **尖峰测试**：尖峰测试是你大幅增加和减少负载并分析系统对变化的反应。
  - **断点测试（容量测试）**：断点测试或容量测试是你随时间逐渐增加负载，直到系统开始失败或退化。

## 安全测试

- **安全测试**：安全测试有助于识别漏洞和弱点。
- **安全原则**：
  - **机密性**：这保护敏感信息不被释放给非预期接收者。
  - **完整性**：这涉及防止恶意用户修改用户信息。
  - **身份验证**：这涉及验证用户身份以确保他们被允许使用该系统。
  - **授权**：这是确定经过身份验证的用户被允许执行哪些操作或被允许访问系统的哪些部分的过程。
  - **可用性**：这确保授权用户在需要时可以获得信息和服务。
  - **不可否认性**：这确保发送方和接收方都有交付证明和发送方身份验证。它保护发送方否认已发送信息。
- **常见的安全威胁**：
  - **跨站脚本（XSS）**：XSS攻击发生在攻击者将恶意脚本注入网页并在受害者浏览器的上下文中执行它们时。
  - **SQL注入**：SQL注入允许恶意用户将恶意代码注入数据库。
  - **拒绝服务（DoS