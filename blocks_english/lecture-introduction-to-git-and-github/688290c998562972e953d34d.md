---
id: 688290c998562972e953d34d
title: 如何为你的仓库创建新分支？
challengeType: 19
dashedName: how-do-you-create-a-new-branch-for-your-repository
---

# --description--

之前你已经学会了如何提交修改并推送到远程仓库，但这些操作大多发生在默认的 `main` 分支上。对于小项目这可能没问题，但当项目变大或你参与开源项目时，分支就变得非常重要。

举例来说，如果你对 fork 的仓库直接在 `main` 分支上提交，而原始仓库并未接受这些更改，那么将来把原始仓库的更新合并到你的 fork 中就会变得很困难。在自己的项目中，如果不使用分支，切换不同任务也会变得混乱，你需要手动追踪哪些修改属于哪个功能或修复。

那么，分支到底是什么？把 `main` 分支想象成一条高速公路，每个提交就是驶上公路的一辆车。如果你想去尝试新功能，就需要从主线上临时绕开，分支就是这种绕开的路径。

分支本质上是从主历史分出的一个分支，你可以在上面自由地开发新功能或修复 bug。如果满意，可以通过合并（merge）把分支变更带回 `main`；如果不满意，可以删除分支并回到 `main`，而不会影响主线代码。

使用 `git branch` 可查看当前分支，输出可能如下：

```sh
* main
```

目前我们只有默认的 `main` 分支，星号（`*`）表示当前检出（checked out）的分支。

可以通过 `git branch` 加上分支名来创建新分支：

```sh
git branch feature
```

该命令会创建名为 `feature` 的新分支。再次运行 `git branch`，你可能会看到：

```sh
  feature
* main
```

此时分支已创建，但你仍在 `main` 分支。要切换到新分支，需要检出（checkout）它：

```sh
git checkout feature
```

或使用：

```sh
git switch feature
```

再次查看分支：

```sh
* feature
  main
```

星号已移动到当前检出的分支。

通常创建新分支后会立即检出它。可以用一个命令同时创建并切换分支：

```sh
git checkout -b feature
```

或：

```sh
git switch -c feature
```

新分支是从 `main` 克隆出来的，在创建时包含 `main` 当时的所有代码。你可以在新分支上添加代码而不影响 `main`。查看 `git status` 会看到：

```sh
On branch feature
nothing to commit, working tree clean
```

创建一个新文件 `feature.md`：

```sh
echo "This is our new feature" > feature.md
```

此时 `git status` 显示：

```sh
On branch feature
Untracked files:
  (use "git add <file>..." to include in what will be committed)
    feature.md

nothing added to commit but untracked files present (use "git add" to track)
```

接着把文件暂存并提交：

```sh
git add feature.md
git commit -m "my new feature"
```

最后，将 `feature` 分支推送到远程仓库：

```sh
git push -u origin feature
```

`-u` 标志会把本地 `feature` 分支与远程分支关联起来，以后只需运行 `git push` 即可推送。

接下来我们将学习如何为新功能创建 pull request（合并请求）！

# --questions--

## --text--

在 Git 中创建新分支允许你做什么？

## --answers--

永久删除 `main` 分支。

### --feedback--

你不想删除你的 `main` 分支。

---

在不影响 `main` 分支的情况下进行更改。

---

直接与 GitHub 用户共享你的代码。

### --feedback--

共享代码涉及推送分支和可能创建拉取请求。

---

更改你本地机器上的 Git 版本。

### --feedback--

分支不会改变 Git 软件版本。

## --video-solution--

2

## --text--

`git branch` 输出中分支名称旁边的 `*` 符号表示什么？

## --answers--

该分支即将被删除。

### --feedback--

星号表示该分支已被"检出"。

---

该分支是仓库中最旧的分支。

### --feedback--

星号表示该分支已被"检出"。

---

该分支正在推送到 GitHub。

### --feedback--

星号表示该分支已被"检出"。

---

该分支当前已被"检出"。

## --video-solution--

4

## --text--

以下命令的作用是什么？

```sh
git push -u origin feature
```

## --answers--

从远程仓库删除 `feature` 分支。

### --feedback--

此命令不会删除任何内容。

---

推送 `feature` 分支并设置其跟踪远程分支。

---

将功能分支合并到 `main` 中。

### --feedback--

合并是与此命令不同的操作。

---

将所有分支推送到远程仓库。

### --feedback--

此命令只推送一个特定分支。

## --video-solution--

2