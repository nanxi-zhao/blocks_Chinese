---
id: 67327195e77b1bd90bdd49d7
title: 当你尝试对数字和字符串进行计算时会发生什么？
challengeType: 19
dashedName: what-happens-when-you-try-to-do-calculations-with-numbers-and-strings
---

# --interactive--

JavaScript 是一种有时会以令人惊讶甚至奇怪的方式工作的语言。当你混合数字和字符串进行计算时，就会出现一个这样的惊喜。你可能首先尝试的是将一个数字和一个字符串相加。在 JavaScript 中，`+` 运算符承担双重职责。它既处理加法又处理字符串连接，字符串连接是将两个字符串连接在一起的方法。

当你在数字和字符串上使用 `+` 时，JavaScript 决定将它们都视为字符串并将它们连接在一起。如果你使用 `typeof` 运算符检查结果的类型，你会看到它确实是一个字符串：

:::interactive_editor

```js
const result = 5 + '10';

console.log(result); // 510
console.log(typeof result); // string
```

:::

你认为如果你交换 `5` 和 `'10'` 的顺序会发生什么？

:::interactive_editor

```js
const result = '10' + 5;

console.log(result); // 105
console.log(typeof result); // string
```

:::

你可以看到发生了同样的事情。JavaScript 在 `'10'` 中看到一个字符串，在 `5` 中看到一个数字，所以它将数字转换为字符串并将它们连接起来。这被称为类型强制转换。类型强制转换是当一个数据类型的值被转换为另一个数据类型时。

当你尝试对字符串和数字执行其他算术运算如减法、乘法或除法时，事情变得更有趣。在这些情况下，JavaScript 会尝试在进行数学运算之前将字符串转换为数字——另一种类型强制转换！以下是发生的情况：

:::interactive_editor

```js
const subtractionResult = '10' - 5;
console.log(subtractionResult); // 5
console.log(typeof subtractionResult); // number

const multiplicationResult = '10' * 2;
console.log(multiplicationResult); // 20
console.log(typeof multiplicationResult); // number

const divisionResult = '20' / 2;
console.log(divisionResult); // 10
console.log(typeof divisionResult); // number
```

:::

在上面的例子中，JavaScript 成功地将字符串 `'10'` 或 `'20'` 转换为数字，然后执行计算。因此，`'10' - 5` 得到 `5`，`'10' * 2` 得到 `20`，`'20' / 2` 得到 `10`。

但如果字符串看起来不像数字呢？让我们看看那种情况下会发生什么：

:::interactive_editor

```js
const subtractionResult = 'abc' - 5;
console.log(subtractionResult); // NaN
console.log(typeof subtractionResult); // number

const multiplicationResult = 'abc' * 2;
console.log(multiplicationResult); // NaN
console.log(typeof multiplicationResult); // number

const divisionResult = 'abc' / 2;
console.log(divisionResult); // NaN
console.log(typeof divisionResult); // number
```

:::

在上面的例子中，字符串 `'abc'` 不代表有效的数值，所以 JavaScript 无法将其转换为有意义的数字。当这种转换失败时，JavaScript 返回 `NaN`，代表"Not a Number"（非数字）。`NaN` 是 `Number` 类型的一个特殊值，表示无效或无法表示的数字。

如果你对布尔值（`true` 或 `false`）执行算术运算会怎样？让我们看看会发生什么。JavaScript 在数学运算中将布尔值视为数字：`true` 变成 `1`，`false` 变成 `0`。

:::interactive_editor

```js
const result1 = true + 1;
console.log(result1); // 2
console.log(typeof result1); // number

const result2 = false + 1;
console.log(result2); // 1
console.log(typeof result2); // number

const result3 = 'Hello' + true;
console.log(result3); // "Hellotrue"
console.log(typeof result3); // string
```

:::

在前两个例子中，`true + 1` 结果是 `2`，`false + 1` 结果是 `1`。在第三个例子中，`'Hello' + true`，JavaScript 将 `true` 转换为字符串并将其与 `'Hello'` 连接，结果是 `'Hellotrue'`，这是一个字符串。

对于 `null` 和 `undefined`，JavaScript 在数学运算中将 `null` 视为 `0`，将 `undefined` 视为 `NaN`：

:::interactive_editor

```js
const result1 = null + 5;
console.log(result1); // 5
console.log(typeof result1); // number

const result2 = undefined + 5;
console.log(result2); // NaN
console.log(typeof result2); // number
```

:::

JavaScript 经常执行类型强制转换，自动将数据类型如数字、字符串和布尔值以有时令人意外的方式转换。理解这些转换对于避免错误和在项目中编写健壮的代码至关重要。

# --questions--

## --text--

运行以下代码时会发生什么？

```js
const result = 3 + "19";
```

## --answers--

JavaScript 忽略字符串，只对数字执行运算。

### --feedback--

回想一下加法运算中的类型强制转换是如何工作的，以及你如何使用相同的符号来组合字符串。

---

当你尝试在算术中混合字符串和数字时，JavaScript 会抛出错误。

### --feedback--

回想一下加法运算中的类型强制转换是如何工作的，以及你如何使用相同的符号来组合字符串。

---

JavaScript 将数字 `3` 转换为字符串 `"3"`，连接两个字符串，并将值 `"319"` 赋给 `result`。

---

JavaScript 将字符串 `"19"` 转换为数字 `19`，执行运算，并将值 `22` 赋给 `result`。

### --feedback--

回想一下加法运算中的类型强制转换是如何工作的，以及你如何使用相同的符号来组合字符串。

## --video-solution--

3

## --text--

运行以下代码时会发生什么？

```js
const result = "6" - 4;
```

## --answers--

转换失败，JavaScript 返回 `NaN`。

### --feedback--

回想一下减法、乘法、除法和其他类型运算中的类型强制转换是如何工作的。

---

JavaScript 将数字 `4` 转换为字符串 `"4"`，连接两个字符串，并将值 `"64"` 赋给 `result`。

### --feedback--

回想一下减法、乘法、除法和其他类型运算中的类型强制转换是如何工作的。

---

值 `Infinity` 被赋给 `result`。

### --feedback--

回想一下减法、乘法、除法和其他类型运算中的类型强制转换是如何工作的。

---

JavaScript 将字符串 `"6"` 转换为数字 `6`，执行运算，并将值 `2` 赋给 `result`。

## --video-solution--

4

## --text--

在 JavaScript 中对布尔值（`true` 或 `false`）执行算术运算时会发生什么？

## --answers--

JavaScript 抛出错误。

### --feedback--

考虑 JavaScript 如何在数值上下文中解释 `true` 和 `false`。

---

JavaScript 忽略布尔值，只对数字执行运算。

### --feedback--

考虑 JavaScript 如何在数值上下文中解释 `true` 和 `false`。

---

JavaScript 在算术运算中将 `true` 视为 `1`，将 `false` 视为 `0`。

---

JavaScript 在执行运算之前将布尔值转换为字符串。

### --feedback--

考虑 JavaScript 如何在数值上下文中解释 `true` 和 `false`。

## --video-solution--

3