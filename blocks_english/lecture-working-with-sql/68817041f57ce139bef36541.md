---
id: 68817041f57ce139bef36541
title: 什么是SQL注入，有哪些预防方法？
challengeType: 19
dashedName: what-is-sql-injection-and-what-are-some-ways-to-prevent-it
---

# --description--

SQL注入是一种Web安全漏洞，攻击者在其中更改或利用Web应用程序向数据库发出的查询。例如，攻击者可以将恶意SQL代码插入查询中，以在后端运行恶意代码。

当您为用户提供通过登录表单、搜索栏或URL参数输入数据的选项，然后在字符串插值或连接中使用该用户输入来生成最终SQL命令时，可能会发生这种情况。

根据攻击者的目标，恶意SQL代码可能对您的数据库和Web应用程序造成重大破坏，如绕过身份验证、从数据库窃取数据，或修改或删除数据库记录。因此，您应该认真对待此威胁。

例如，假设您的Web应用程序使用如下SQL查询来验证用户身份，直接嵌入用户输入的用户名和密码：

```sql
'SELECT * FROM users WHERE username = ' + username_input + ' AND password = ' + password_input + ';'
```

如果攻击者在[username]字段中输入如下内容：

```sql
'" " OR "1"="1" --'
```

并且在[password]字段中输入任何内容，由于["1"="1"]始终为[true]且[--]注释掉查询的其余部分，[WHERE]子句变为：

```sql
WHERE username = " " OR TRUE
```

这始终为[true]。

根据数据库实现，这可能返回第一个用户或数据库中任何用户的数据，并允许攻击者在没有有效凭据的情况下登录。

那么您如何防止这种情况呢？有两种主要方法可以防止SQL注入：

- 不要编写使用字符串连接的动态查询。
- 防止恶意SQL输入包含在将在后端执行的查询中。

在实践中，您可以使用参数化语句，也称为参数化查询。它们将SQL结构与用户输入的数据分开，这可以防止数据库将输入数据解释为可执行代码。

另一个重要技术是输入验证。这在所有情况下都建议作为次要安全措施，但对于与表名、列名和排序顺序相关的SQL查询部分特别重要。如果可能，建议直接在代码中分配表名和列名，而不是从用户输入中获取。

如果尽管采取了所有预防措施，您还是遭遇了SQL注入攻击，您可以通过限制每个数据库账户的权限来最小化其对数据库的影响。仅为每个数据库用户授予完成其任务所需的权限，但不要授予更多权限。如果账户只需要从数据库读取数据，请仅授予其读取权限。作为预防措施，永远不要将管理员权限分配给您的应用程序账户。这样做非常危险，因为攻击者可能获得对数据库的完全访问和完全控制。

SQL注入是您作为开发人员应该意识到并在Web应用程序实现中预防的非常常见的攻击。通过这些技术，您可以保护您的数据库并确保用户数据的安全。

# --questions--

## --text--

SQL注入攻击的主要目标是什么？

## --answers--

提高数据库的性能。

### --feedback--

考虑"注入"在技术上下文中可能意味着什么，以及"SQL注入"这个名称指的是系统的哪个部分。

---

干扰应用程序执行的数据库查询。

---

加密敏感的用户数据。

### --feedback--

考虑"注入"在技术上下文中可能意味着什么，以及"SQL注入"这个名称指的是系统的哪个部分。

---

增强网站的视觉外观。

### --feedback--

考虑"注入"在技术上下文中可能意味着什么，以及"SQL注入"这个名称指的是系统的哪个部分。

## --video-solution--

2

## --text--

以下哪项是防止SQL注入漏洞的最有效方法之一？

## --answers--

定期更改数据库密码。

### --feedback--

考虑如何将SQL查询的结构与用户提供的输入分开。

---

限制用户输入字段的大小。

### --feedback--

考虑如何将SQL查询的结构与用户提供的输入分开。

---

使用参数化语句或查询。

---

向开发人员显示详细的数据库错误消息。

### --feedback--

考虑如何将SQL查询的结构与用户提供的输入分开。

## --video-solution--

3

## --text--

如果网站的登录表单容易受到SQL注入攻击，攻击者可能实现什么？

## --answers--

自动备份整个数据库。

### --feedback--

考虑登录表单的目的以及操纵数据库查询如何影响其预期功能。

---

在没有有效凭据的情况下绕过登录过程。

---

提高网站的搜索引擎排名。

### --feedback--

考虑登录表单的目的以及操纵数据库查询如何影响其预期功能。

---

更改网站的设计和布局。

### --feedback--

考虑登录表单的目的以及操纵数据库查询如何影响其预期功能。

## --video-solution--

2