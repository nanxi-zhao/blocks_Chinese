---
id: 67d1eaf77f510e15dfed7c14
title: 什么是状态，useState Hook是如何工作的？
challengeType: 19
dashedName: what-is-state-and-how-does-the-usestate-hook-work
---

# --description--

状态是React和其他前端框架最重要的基础之一。它就像组件的大脑，意味着它持有可以随时间变化的信息，并控制组件的行为和外观。

让我们深入了解什么是状态以及`useState` hook如何让你使用它。

状态代表React组件中的动态数据，如来自用户输入的值、从API获取的数据或待办事项列表中的项目。

每当状态发生变化时，React会重新渲染组件而无需重新加载页面，以在用户界面中反映这些变化。这种响应性使您的应用程序具有交互性。

`useState` hook是一个函数，允许您在函数组件中声明状态变量。

在hooks出现之前，您只能在类组件中使用状态。但是自从React 16.8引入hooks以来，您可以通过使用`useState` hook在函数组件中使用状态。

要使用`useState` hook，您需要从React中导入它：

```js
import { useState } from "react";
```

您也可以导入React本身并作为属性访问`useState` hook：

```js
import React from "react";
```

以下是导入`useState`时声明状态变量的方法：

```js
const [stateVariable, setStateFunction] = useState(initialValue);
```

以下是导入React时声明状态变量的方法：

```js
const [stateVariable, setStateFunction] = React.useState(initialValue);
```

在状态变量中您有以下内容：

- `stateVariable`保存当前状态值
- `setStateFunction`（设置函数）更新状态变量
- `initialValue`设置初始状态

请注意，React组件中的状态是私有的，并且与每个组件实例隔离。这意味着，如果您渲染同一个组件两次，一个组件的状态不会影响另一个组件。这也意味着，如果您想在组件之间共享状态，那么您需要将状态提升到共同的父组件并通过props传递下去。

另一点是，hooks必须在组件的顶层调用，就在`return`关键字之前，以保持跨渲染的状态和效果的一致性。这意味着您不能在循环、条件或嵌套函数中使用状态。

以下是使用`Counter`组件中的`useState` hook管理状态的示例：

```jsx
// 导入useState hook
import { useState } from "react";

function Counter() {
  const initialValue = 0;

  // 状态变量和设置函数
  const [count, setCount] = useState(initialValue);

  return (
    <div>
      {/* 显示当前状态值 */}
      <h2>{count}</h2>

      <button onClick={() => setCount(count - 1)}>Decrement</button>
      <button onClick={() => setCount(count + 1)}>Increment</button>
    </div>
  );
}

export default Counter;
```

在上面的代码中，我们从React导入了`useState` hook。在`Counter`组件中，`count`表示当前状态，而`setCount`是负责更新状态的设置函数。当前状态值为`0`。`return`语句包含计数和两个按钮，用于将计数递减和递增`1`。

您可以通过多次调用`useState` hook来管理多个状态片段。当您有不相关的状态变量时，这一点尤其重要：

```jsx
function UserProfile() {
  const [isOnline, setIsOnline] = useState(false);
  const [notifications, setNotifications] = useState(0);

  // 组件的其余逻辑
}
```

当管理多个独立更新的状态时，您也可以多次调用`useState` hook，如表单字段：

```jsx
function SignUpForm() {
  const [name, setName] = useState("");
  const [username, setUsername] = useState("");
  const [email, setEmail] = useState("");

  // 组件的其余逻辑
}
```

但在这种情况下，最好将状态组合在一起，因为它们都是同一表单的一部分：

```jsx
function SignUpForm() {
  const [formData, setFormData] = useState({
    name: "",
    username: "",
    email: "",
  });

  // 组件的其余逻辑
}
```

这就是状态以及如何使用`useState` hook。

# --questions--

## --text--

在哪个版本的React中引入了hooks，允许在函数组件中使用状态？

## --answers--

React 15.6

### --feedback--

回顾课程开始时讨论的答案。

---

React 16.8

---

React 17.0

### --feedback--

回顾课程开始时讨论的答案。

---

React 18.2

### --feedback--

回顾课程开始时讨论的答案。

## --video-solution--

2

## --text--

状态在React组件中代表什么？

## --answers--

动态数据，在更改时触发重新渲染。

---

仅静态数据，不会改变。

### --feedback--

想想使UI具有交互性并在不重新加载页面的情况下更新的数据。

---

组件的样式信息。

### --feedback--

想想使UI具有交互性并在不重新加载页面的情况下更新的数据。

---

在应用程序开始时设置的固定值。

### --feedback--

想想使UI具有交互性并在不重新加载页面的情况下更新的数据。

## --video-solution--

1

## --text--

以下哪项是使用`useState` hook的正确方法？

## --answers--

```js
const [formData, setFormData] = useState(<
  name: "",
  username: "",
  email: "",
>);
```

### --feedback--

回顾课程结束时讨论的答案。

---

```js
const ref = useState({
  name: "",
  username: "",
  email: "",
});
```

### --feedback--

回顾课程结束时讨论的答案。

---

```js
const <formData, setFormData> = useState({
  name: "",
  username: "",
  email: "",
});
```

### --feedback--

回顾课程结束时讨论的答案。

---

```jsx
const [formData, setFormData] = useState({
  name: "",
  username: "",
  email: "",
});
```

## --video-solution--

4