---
id: 673368b1cf26253212a3cfb2
title: 什么是querySelectorAll()方法，何时应该使用它？
challengeType: 19
dashedName: what-is-the-queryselectorall-method-and-when-should-you-use-it
---

# --description--

让我们来学习[querySelectorAll()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L15-L15)方法。你可以使用这个方法来获取匹配特定CSS选择器的所有DOM元素的列表。

这就是你调用[querySelectorAll()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L15-L15)方法的方式：

```js
document.querySelectorAll(selectors);
```

在[document](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/67336894ae148431a870694d.md#L62-L62)对象上调用它，并传递一个包含CSS选择器的字符串作为参数。参数必须是有效的CSS选择器字符串。否则，将抛出[SyntaxError](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L18-L18)异常。

[querySelectorAll()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L15-L15)返回一个[NodeList](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L20-L20)对象，这是一个匹配指定CSS选择器的节点集合。

列表将包含每个匹配CSS选择器的[Element](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/67336894ae148431a870694d.md#L62-L62)对象。如果没有找到匹配项，列表将为空。

元素将按照它们在HTML文档中出现的顺序排列。例如，你可以匹配特定类型的所有元素：

```js
document.querySelectorAll("div");
```

具有特定类的所有元素：

```js
document.querySelectorAll(".rounded");
```

具有特定ID的所有元素：

```js
document.querySelectorAll("#logo");
```

或者具有特定属性的所有元素，比如所有将用户引导到特定URL的链接：

```js
document.querySelectorAll("a[href='https://www.MasterPuti.org/']");
```

你也可以使用更复杂的CSS选择器，比如这个，它匹配具有[ingredients](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L63-L67)类的无序列表元素内的所有列表项：

```js
document.querySelectorAll("ul.ingredients li");
```

由于该方法将返回一个节点集合，你可以将这个集合赋值给一个变量并在程序中使用它来处理各个元素，就像你在通用语法示例中看到的那样：

```js
const matches = document.querySelectorAll(selectors); 
```

例如，如果你有这个包含三个列表项的无序列表：

```html
<ul class="ingredients">
  <li>Flour</li>
  <li>Cheese</li>
  <li>Water</li>
</ul>
```

你可以调用[querySelectorAll()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L15-L15)方法来匹配具有[ingredients](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L63-L67)类的无序列表内的所有列表项，并将返回值赋值给[matches](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L57-L57)常量：

```js
const matches = document.querySelectorAll("ul.ingredients li");
```

这将返回一个包含三个节点的集合。每个节点代表一个列表项元素：

```js
// NodeList(3)
{
  0: `<li>Flour</li>`,
  1: `<li>Cheese</li>`,
  2: `<li>Water</li>`,
  length: 3,
}
```

你可以像处理任何其他JavaScript数组一样处理这个集合。

例如，你可以用[console.log()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/67336894ae148431a870694d.md#L79-L79)在控制台中显示它：

```js
console.log(matches);
```

你也可以用[length](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L99-L99)属性检查集合的长度：

```js
console.log(matches.length);
```

输出将是一个整数，表示集合中节点的数量：

```md
3
```

你也可以通过对应的索引访问集合中的各个元素。第一个元素将在索引[0](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L111-L111)处：

```js
console.log(matches[0]);
console.log(matches[1]);
console.log(matches[2]);
```

这是输出结果：

```html
<li>Flour</li>
<li>Cheese</li>
<li>Water</li>
```

元素会在控制台上逐个打印出来。

你也可以用[for](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L129-L131)循环遍历这些元素：

```js
for (let i = 0; i < matches.length; i++) {
  console.log(matches[i]);    
}
```

在这种情况下，输出将是完全相同的。但对于处理集合中的所有元素来说，这可能非常强大。

JavaScript中的[querySelectorAll()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L15-L15)方法是基于CSS选择器选择多个元素的强大工具。通过这个方法，你可以选择网页中的特定元素并根据需要操作它们。

# --questions--

## --text--

JavaScript中[querySelectorAll()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L15-L15)方法的主要用途是什么？

## --answers--

在DOM中创建新元素。

### --feedback--

想想[querySelectorAll()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L15-L15)如何用于定位元素。

---

修改现有元素的内容。

### --feedback--

想想[querySelectorAll()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L15-L15)如何用于定位元素。

---

基于CSS选择器选择多个元素。

---

从DOM中移除元素。

### --feedback--

想想[querySelectorAll()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L15-L15)如何用于定位元素。

## --video-solution--

3

## --text--

[querySelectorAll()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L15-L15)方法返回什么类型的对象？

## --answers--

[String](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L182-L182)

### --feedback--

想想用于表示元素集合的数据结构。

---

[Number](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L190-L190)

### --feedback--

想想用于表示元素集合的数据结构。

---

[NodeList](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L198-L198)

---

[Array](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L202-L202)

### --feedback--

想想用于表示元素集合的数据结构。

## --video-solution--

3

## --text--

当使用带有字符串选择器的[querySelectorAll()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L15-L15)时，如果选择器不匹配任何元素会发生什么？

## --answers--

抛出错误。

### --feedback--

想想[querySelectorAll()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L15-L15)查询的可能结果。

---

返回[null](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L226-L226)值。

### --feedback--

想想[querySelectorAll()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L15-L15)查询的可能结果。

---

返回一个空的[NodeList](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L198-L198)。

---

返回第一个匹配的元素。

### --feedback--

想想[querySelectorAll()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/673368b1cf26253212a3cfb2.md#L15-L15)查询的可能结果。

## --video-solution--

3