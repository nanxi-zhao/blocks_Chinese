---
id: 6733696567d2273540aa6033
title: 什么是Web动画API，它如何与CSS动画属性相关？
challengeType: 19
dashedName: what-is-the-web-animations-api-and-how-does-it-relate-to-css-animation-properties
---

# --interactive--

[Web Animations](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L10-L10) API (WAAPI) 允许你直接在JavaScript中创建和控制动画。使用WAAPI，你可以更动态地处理动画，使其更容易操作。

让我们更详细地看看WAAPI，这样你就可以开始在JavaScript代码中直接处理动画了。WAAPI的核心是[Animation](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L12-L12)构造函数，它提供了几种实例方法和属性，允许你动态地为元素添加动画。

[Animation](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L12-L12)构造函数中的一个重要方法是[animate()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L51-L59)。它允许你通过指定关键帧和选项（如持续时间、方向、缓动和迭代次数）来创建动画。

以下是[animate()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L51-L59)方法的基本语法：

```js
element.animate(keyframes, options);
```

让我们看一个示例。

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<div class="square" id="square"></div>
<script src="index.js"></script>
```

```css
body {
  background: #f1f1f1;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
}

.square {
  background: #1b1b32;
  width: 10rem;
  aspect-ratio: 1/1;
}
```

```js
const square = document.querySelector("#square");

const animation = square.animate(
  [{ transform: "translateX(0px)" }, { transform: "translateX(100px)" }],
  {
    duration: 2000, // makes animation lasts 2 seconds
    iterations: Infinity, // loops indefinitely
    direction: "alternate", // moves back and forth
    easing: "ease-in-out" // smooth easing
  }
);
```

:::

浏览器中的结果将是一个蓝色方块水平来回移动。

[Animation](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L12-L12)构造函数的实例方法包括：

```js
play()
pause()
reverse()
finish()
cancel()
```

实例属性包括：

```md
playbackRate
currentTime
startTime
effect
timeline
playState
finished
onfinish
oncancel
```

让我们修改示例来使用[play()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L147-L147)、[pause()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L153-L153)方法和[onfinish](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L141-L143)属性。以下是新版本：

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<div class="square" id="square"></div>

<button id="playBtn">Play</button>
<button id="pauseBtn">Pause</button>
<script src="index.js"></script>
```

```css
body {
  background: #f1f1f1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
}
.square {
  background: #1b1b32;
  width: 10rem;
  aspect-ratio: 1/1;
  margin-bottom: 20px;
}
button {
  margin: 10px;
  padding: 10px 20px;
  font-size: 16px;
}
```

```js
const square = document.querySelector("#square");
const playBtn = document.querySelector("#playBtn");
const pauseBtn = document.querySelector("#pauseBtn");

const animation = square.animate(
  [{ transform: "translateX(0px)" }, { transform: "translateX(200px)" }],
  {
    duration: 5000, // Animation lasts 5 seconds
    // iterations: Infinity, // Loops indefinitely
    direction: "alternate", // Moves back and forth
    easing: "ease-in-out" // Smooth easing function
  }
);

// Set the onfinish property to log a message when the animation ends
animation.onfinish = () => {
  console.log("Animation finished!");
};

// Play the animation when the "Play" button is clicked
playBtn.addEventListener("click", () => {
  animation.play();
  console.log("You start the animation");
});

// Pause the animation when the "Pause" button is clicked
pauseBtn.addEventListener("click", () => {
  animation.pause();
  console.log("You pause the animation");
});
```

:::

浏览器中的结果将在点击[play](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L98-L98)按钮时显示蓝色方块从左到右移动。

WAAPI通过在JavaScript中提供对动画的更多动态控制，扩展了CSS动画的功能。

使用CSS动画，你可以使用[animation-name](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L164-L164)、[animation-duration](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L164-L164)和[animation-timing-function](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L164-L164)等属性声明性地定义动画。你也有机会使用WAAPI的[animate()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L51-L59)方法做同样的事情。

区别在于，你可以更直接和动态地控制使用[animate()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L51-L59)方法创建的动画，但对于CSS动画，你需要通过定义自定义样式并在JavaScript文件中触发它们来做更多的工作。

CSS动画适用于简单且声明性的自动运行动画。这些包括悬停效果、过渡或触发后不需要太多交互的动画。如果你的动画需要响应用户交互（如点击和滚动），或者你希望用户能够动态地暂停、反转或改变速度，那么WAAPI是更好的选择。

当你希望使用CSS的简单性进行基本设置但需要在运行时控制动画时，可以考虑结合使用WAAPI和CSS动画。

# --questions--

## --text--

Web动画API (WAAPI)中创建动画的主要方法是什么？

## --answers--

[setInterval()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L57-L59)

### --feedback--

想想允许你定义关键帧和持续时间等选项的方法。

---

[setTimeout()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733694805a85d34ced08a9b.md#L25-L27)

### --feedback--

想想允许你定义关键帧和持续时间等选项的方法。

---

[animate()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L51-L59)

---

[requestAnimationFrame()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/67336956340e8a34fbd5d9f3.md#L100-L100)

### --feedback--

想想允许你定义关键帧和持续时间等选项的方法。

## --video-solution--

3

## --text--

以下哪项不是Web动画API (WAAPI)中[Animation](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L12-L12)构造函数的实例方法？

## --answers--

[play()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L147-L147)

### --feedback--

想想用于控制动画的方法。

---

[pause()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L153-L153)

### --feedback--

想想用于控制动画的方法。

---

[reverse()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L71-L71)

### --feedback--

想想用于控制动画的方法。

---

[stop()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733696567d2273540aa6033.md#L239-L239)

## --video-solution--

4

## --text--

什么时候应该使用WAAPI而不是CSS动画？

## --answers--

用于简单、自动的悬停效果。

### --feedback--

想想需要更多控制动画的情况。

---

当你需要动画响应用户交互（如点击、滚动）或允许动态控制（如暂停或反转）时。

---

当你只需要没有交互的过渡时。

### --feedback--

想想需要更多控制动画的情况。

---

用于触发后不需要太多交互的动画。

### --feedback--

想想需要更多控制动画的情况。

## --video-solution--

2