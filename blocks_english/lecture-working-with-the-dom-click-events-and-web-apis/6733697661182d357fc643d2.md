---
id: 6733697661182d357fc643d2
title: 什么是Canvas API，它是如何工作的？
challengeType: 19
dashedName: what-is-the-canvas-api-and-how-does-it-work
---

# --interactive--

[Canvas](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L10-L10) API是一个强大的工具，让你可以直接在JavaScript文件中操作图形。一切都从HTML中的[canvas](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L19-L19)元素开始。这个元素作为一个绘图表面，你可以使用[Canvas](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L10-L10) API的实例方法和属性来操作它。

[Canvas](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L10-L10) API提供了创建令人惊叹的视觉效果所需的一切，包括形状、文本、动画，甚至复杂的游戏。它有[HTMLCanvasElement](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L22-L22)、[CanvasRenderingContext2D](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L12-L12)、[CanvasGradient](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L12-L12)、[CanvasPattern](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L12-L12)、[TextMetrics](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L12-L12)等接口，这些接口提供了你可以在JavaScript文件中用于创建图形的方法和属性。

让我们看看[Canvas](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L10-L10) API是如何工作的，这样你就可以开始用JavaScript创建图形了。

首先，你需要在HTML文件中创建一个[canvas](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L19-L19)元素：

```html
<canvas id="my-canvas"></canvas>
```

[canvas](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L19-L19)元素由[HTMLCanvasElement](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L22-L22)接口表示，该接口提供了操作它的方法和属性。此外，你还可以使用[Canvas](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L10-L10) API中其他接口的方法和属性。

你可以在HTML中给你的[canvas](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L19-L19)设置[width](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L34-L34)和[height](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L35-L35)：

```html
<canvas id="my-canvas" width="400" height="400"></canvas>
```

或者你可以使用[HTMLCanvasElement](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L22-L22)接口的[width](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L34-L34)和[height](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L35-L35)属性：

```js
const canvas = document.getElementById("my-canvas");
canvas.width = 400;
canvas.height = 400;
```

现在，你在屏幕上还看不到任何东西。创建[canvas](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L19-L19)元素后，下一步是使用[HTMLCanvasElement](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L22-L22)接口的[getContext()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L38-L38)方法获取画布的绘图上下文。

最常见的上下文是[2d](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L40-L40)，它允许你在二维空间中绘图：

```js
const canvas = document.getElementById("my-canvas");
const ctx = canvas.getContext('2d');
```

如果你将[ctx](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L44-L44)变量记录到控制台，你会看到[CanvasRenderingContext2D](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L12-L12)的方法和属性，你可以用它们来创建形状、颜色、线条等，以及它们的默认值：

```js
console.log(ctx);
```

一旦你有了2D上下文，你就可以开始在画布上绘图了。

[Canvas](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L10-L10) API提供了几种绘制形状、线条和文本的方法和属性。其中之一是[fillStyle](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L76-L76)属性，你可以将其与[fillRect()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L79-L79)方法结合使用来绘制矩形或正方形：

:::interactive_editor

```html
<html>
  <head>
  </head>
  <body>
    <canvas id="my-canvas" width="400" height="400"></canvas>
    <script src="index.js"></script>
  </body>
</html>
```

```js
const canvas = document.getElementById("my-canvas");

const ctx = canvas.getContext("2d");

// Set the background color
ctx.fillStyle = "crimson";

// Draw a rectangle
ctx.fillRect(1, 1, 150, 100);
```

:::

[fillRect](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L79-L79)接受4个数值，分别代表x轴、y轴、宽度和高度。

现在屏幕上有东西了。你也可以绘制文本甚至创建动画。这里是一个表示文本的画布：

```html
<canvas id="my-text-canvas" width="300" height="70"></canvas>
```

要最终绘制文本，将文本作为第一个参数传递给[fillText()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L119-L119)方法，然后是x轴和y轴的值：

:::interactive_editor

```html
<html>
  <head>
  </head>
  <body>
    <canvas id="my-text-canvas" width="300" height="70"></canvas>
    <script src="index.js"></script>
  </body>
</html>
```

```js
const textCanvas = document.getElementById("my-text-canvas");

const textCanvasCtx = textCanvas.getContext("2d");

// Set font family and size
textCanvasCtx.font = "30px Arial";

// Set text color
textCanvasCtx.fillStyle = "crimson";

// Draw the text
textCanvasCtx.fillText("Hello HTML Canvas!", 1, 50);
```

:::

浏览器中的结果将是红色文本[Hello HTML Canvas!](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L119-L119)。

你可以用[Canvas](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L10-L10) API做更多的事情。例如，你可以将其与[requestAnimationFrame](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/67336956340e8a34fbd5d9f3.md#L19-L19)结合使用来创建自定义动画、可视化、游戏等。

# --questions--

## --text--

在[Canvas](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L10-L10) API中，哪个方法和属性让你绘制和填充矩形或正方形？

## --answers--

[strokeRect()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L136-L136)和[lineWidth](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L136-L136)。

### --feedback--

想想绘制形状的方法和用颜色填充它的属性。

---

[fillRect()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L144-L144)和[fillStyle](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L76-L76)。

---

[clearRect()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L148-L148)和[strokeStyle](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L148-L148)。

### --feedback--

想想绘制形状的方法和用颜色填充它的属性。

---

[beginPath()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L156-L156)和[shadowColor](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L156-L156)。

### --feedback--

想想绘制形状的方法和用颜色填充它的属性。

## --video-solution--

2

## --text--

以下哪项不是[Canvas](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L10-L10) API中[CanvasRenderingContext2D](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L12-L12)接口的属性或方法？

## --answers--

[fillStyle](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L76-L76)

### --feedback--

想想画布渲染中常用的属性和方法。

---

[shadowColor](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L180-L180)

### --feedback--

想想画布渲染中常用的属性和方法。

---

[drawImage](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L188-L188)

### --feedback--

想想画布渲染中常用的属性和方法。

---

[backgroundColor](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L196-L196)

## --video-solution--

4

## --text--

如何使用JavaScript中的[fillText()](file:///F:/Code/blocks_Chinese/blocks_english/lecture-working-with-the-dom-click-events-and-web-apis/6733697661182d357fc643d2.md#L119-L119)方法在画布上绘制文本？

## --answers--

传递文本，然后是宽度和高度的值。

### --feedback--

想想文本应该出现的坐标。

---

传递文本，然后是x轴和y轴的值。

---

传递文本和字体大小。

### --feedback--

想想文本应该出现的坐标。

---

传递文本和颜色值。

### --feedback--

想想文本应该出现的坐标。

## --video-solution--

2