---
id: 6723ce555ff2dfc0cc04b69a
title: 使用 JavaScript 进行表单验证复习
challengeType: 31
dashedName: review-form-validation-with-javascript
---

# --description--

## 使用 JavaScript 验证表单

- **约束验证 API**：某些 HTML 元素，如 `textarea` 和 `input` 元素，暴露了约束验证 API。这个 API 允许你断言用户为该元素提供的值是否通过了你编写的任何 HTML 级别验证，例如最小长度或模式匹配。
- **`checkValidity()` 方法**：如果元素匹配所有 HTML 验证（基于其属性），此方法返回 `true`，如果不匹配则返回 `false`。

```js
const input = document.querySelector("input");

input.addEventListener("input", (e) => {
  if (!e.target.checkValidity()) {
    e.target.setCustomValidity("你必须使用 .com 邮箱。")
  }
})
```

- **`reportValidity()` 方法**：此方法告诉浏览器 `input` 是无效的。

```js
const input = document.querySelector("input");

input.addEventListener("input", (e) => {
  if (!e.target.checkValidity()) {
    e.target.reportValidity();
  }
})
```

- **`validity` 属性**：此属性用于获取或设置表单控件（如 `<input>`、`<select>` 等）的有效性状态，并提供有关用户输入是否满足为该元素定义的约束（例如 `required` 字段、模式约束、最大长度等）的信息。

```js
const input = document.querySelector("input");

input.addEventListener("input", (e) => {
  console.log(e.target.validity);
})
```

- **`patternMismatch` 属性**：如果值不匹配指定的正则表达式模式，此属性将为 `true`。

## `preventDefault()` 方法

- **定义**：DOM 中触发的每个事件都有一些默认行为。复选框上的点击事件默认切换该复选框的状态。按下空格键在聚焦的按钮上激活按钮。`preventDefault()` 方法在这些 `Event` 对象上停止该行为的发生。

```js
button.addEventListener('click', (event) => {
  // 阻止默认按钮点击行为  
  event.preventDefault(); 
  alert('按钮点击被阻止了！');
});
```

## 提交表单

- **定义**：有三种方式可以提交表单。第一种是当用户点击表单中 `type` 属性设置为 `submit` 的按钮时。第二种是当用户在表单中的任何可编辑 `input` 字段上按下 `Enter` 键时。第三种是通过 JavaScript 调用 `form` 元素的 `requestSubmit()` 或 `submit()` 方法。
- **`action` 属性**：`action` 属性应包含 URL 或当前域的相对路径。此值确定表单尝试发送数据的位置 - 如果你不设置 `action` 属性，表单将向当前页面的 URL 发送数据。

```html
<form action="https://MasterPuti.org">
  <input
    type="number"
    id="input"
    placeholder="输入一个数字"
    name="number"
  />
  <button type="submit">提交</button>
</form>
```

- **`method` 属性**：此属性接受标准 `HTTP` 方法，如 `GET` 或 `POST`，并在向 action URL 发出请求时使用该方法。当未设置方法时，表单将默认为 `GET` 请求。表单中的数据将被 URL 编码为 `name=value` 对并作为查询参数附加到 action URL。

```html
<form action="/data" method="POST">
  <input
    type="number"
    id="input"
    placeholder="输入一个数字"
    name="number"
  />
  <button type="submit">提交</button>
</form>
```

- **`enctype` 属性**：`form` 元素接受 `enctype` 属性，该属性表示用于数据的编码类型。此属性仅接受三个值：`application/x-www-form-urlencoded`（这是默认值，将数据作为 URL 编码的表单体发送）、`text/plain`（以纯文本形式发送数据，以 `name=value` 对形式用换行符分隔）或 `multipart/form-data`，这是专门用于处理带有文件上传的表单。

# --assignment--

复习使用 JavaScript 进行表单验证的主题和概念。